{% extends 'base.html' %}

{% block content %}
<main class="main">
    <section class="section master-plan container">
      <div class="section__header">
        <h1 class="section__header-title flex-center">
          Сводный план
          <span class="content-size">
            <svg
              width="30"
              height="30"
              viewBox="0 0 30 30"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g clip-path="url(#clip0_1117_6047)">
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M29.9991 2.14286C29.9991 0.959406 29.0397 0 27.8563 0H4.53125C5.63122 1.21683 5.63122 3.06889 4.53125 4.28573H27.8563C29.0397 4.28573 29.9991 3.32632 29.9991 2.14286Z"
                  fill="#00A6F2"
                />
                <path
                  d="M27.3206 29.4643V5.35718H2.67773V29.4643C2.67773 29.7602 2.91759 30 3.21343 30H26.7849C27.0808 30 27.3206 29.7602 27.3206 29.4643ZM6.96346 24.1072H6.42777C6.13188 24.1072 5.89208 23.8673 5.89208 23.5715C5.89208 23.2756 6.13193 23.0358 6.42777 23.0358H6.96346C7.25935 23.0358 7.49916 23.2756 7.49916 23.5715C7.49916 23.8673 7.25935 24.1072 6.96346 24.1072ZM6.96346 18.2143H6.42777C6.13188 18.2143 5.89208 17.9745 5.89208 17.6786C5.89208 17.3828 6.13193 17.1429 6.42777 17.1429H6.96346C7.25935 17.1429 7.49916 17.3828 7.49916 17.6786C7.49916 17.9745 7.25935 18.2143 6.96346 18.2143ZM6.96346 12.3215H6.42777C6.13188 12.3215 5.89208 12.0816 5.89208 11.7858C5.89208 11.4899 6.13193 11.2501 6.42777 11.2501H6.96346C7.25935 11.2501 7.49916 11.4899 7.49916 11.7858C7.4992 12.0816 7.25935 12.3215 6.96346 12.3215ZM18.2135 24.1072H9.10633C8.81044 24.1072 8.57064 23.8673 8.57064 23.5715C8.57064 23.2756 8.81049 23.0358 9.10633 23.0358H18.2135C18.5094 23.0358 18.7492 23.2756 18.7492 23.5715C18.7492 23.8673 18.5094 24.1072 18.2135 24.1072ZM18.2135 18.2143H9.10633C8.81044 18.2143 8.57064 17.9745 8.57064 17.6786C8.57064 17.3828 8.81049 17.1429 9.10633 17.1429H18.2135C18.5094 17.1429 18.7492 17.3828 18.7492 17.6786C18.7492 17.9745 18.5094 18.2143 18.2135 18.2143ZM18.2135 12.3215H9.10633C8.81044 12.3215 8.57064 12.0816 8.57064 11.7858C8.57064 11.4899 8.81049 11.2501 9.10633 11.2501H18.2135C18.5094 11.2501 18.7492 11.4899 18.7492 11.7858C18.7492 12.0816 18.5094 12.3215 18.2135 12.3215ZM23.9494 22.3431L21.8065 24.486C21.5973 24.6951 21.2582 24.6951 21.049 24.486L19.9776 23.4145C19.7745 23.2043 19.7774 22.8702 19.9841 22.6636C20.1907 22.4569 20.5249 22.454 20.735 22.657L21.4277 23.3497L23.1919 21.5856C23.4021 21.3826 23.7362 21.3855 23.9428 21.5921C24.1495 21.7988 24.1524 22.1329 23.9494 22.3431ZM23.9494 16.4502L21.8065 18.5931C21.5973 18.8022 21.2582 18.8022 21.049 18.5931L19.9776 17.5216C19.7745 17.3114 19.7774 16.9773 19.9841 16.7707C20.1907 16.564 20.5249 16.5611 20.735 16.7641L21.4277 17.4568L23.1919 15.6927C23.4021 15.4897 23.7362 15.4926 23.9428 15.6992C24.1495 15.9059 24.1524 16.24 23.9494 16.4502ZM23.9494 10.5573L21.8065 12.7002C21.5973 12.9093 21.2582 12.9093 21.049 12.7002L19.9776 11.6288C19.7745 11.4185 19.7774 11.0844 19.9841 10.8778C20.1907 10.6712 20.5249 10.6683 20.735 10.8713L21.4277 11.564L23.1919 9.79986C23.4021 9.59684 23.7362 9.59975 23.9428 9.80638C24.1495 10.013 24.1524 10.3472 23.9494 10.5573Z"
                  fill="#00A6F2"
                />
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M0.535691 19.8214H1.60712V4.82142C1.60712 4.52553 1.84698 4.28573 2.14282 4.28573C3.32627 4.28573 4.28568 3.32632 4.28568 2.14286C4.28568 0.959406 3.32632 0 2.14286 0C0.959406 0 0 0.959406 0 2.14286V19.2857C0 19.5816 0.239852 19.8214 0.535691 19.8214Z"
                  fill="#00A6F2"
                />
              </g>
              <defs>
                <clipPath id="clip0_1117_6047">
                  <rect width="30" height="30" fill="white" />
                </clipPath>
              </defs>
            </svg>
          </span>
        </h1>
      </div>
      <div class="section__other-buttons-cont">
        <a
          class="section__other-buttons-cont-button section__other-buttons-cont-button--orange"
          href="{% url 'workorder_list' %}"
        >
          <span class="content-size">
            <svg
              width="30"
              height="30"
              viewBox="0 0 30 30"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <rect width="30" height="30" rx="3" fill="#F28500" />
              <path
                d="M15.944 24C15.8073 24 15.6706 23.9554 15.5612 23.862L5.24216 15.511C5.08983 15.3892 5 15.1985 5 14.9997C5 14.8008 5.08983 14.6101 5.24216 14.4884L15.5612 6.13733C15.7487 5.98313 16.0065 5.95879 16.2213 6.06429C16.4361 6.17385 16.5728 6.40109 16.5728 6.64862V12.2972H20.5137C21.7245 12.2972 22.7986 12.7273 23.611 13.5389C24.3336 14.2612 24.814 15.2594 24.9546 16.3428C25.0991 17.4303 24.896 18.53 24.3843 19.4349C23.8102 20.4494 22.8923 21.1636 21.7284 21.5004C21.5019 21.5653 21.2597 21.4922 21.0996 21.3137C20.9395 21.1352 20.8926 20.8755 20.9746 20.6442C21.2519 19.8813 21.5058 18.8628 21.1543 18.3312C20.877 17.9132 20.1817 17.7022 19.0842 17.7022H16.5689V23.3467C16.5689 23.5942 16.4322 23.8215 16.2174 23.931C16.1314 23.9797 16.0377 24 15.944 24Z"
                fill="white"
              />
            </svg>
          </span>
          <span>Назад к производству</span>
        </a>
      </div>
      <div class="grouped">
        <h2 class="grouped__text">Сгрупированно заказов :</h2>
        <ul class="grouped__numbers">
          <li>
            <span class="grouped__number grouped__number--quantity">{{ orders_count }}</span>
          </li>
          <!-- максимум 5 номеров, шествой и больше - многоточье -->
          {% for oid in order_ids %}
          <li><a class="grouped__number" href="#">№{{ oid }}</a></li>
          {% endfor %}

          <!-- <li><span class="grouped__number" href="#">...</span></li> -->
        </ul>
      </div>
      <div class="tables-cont tables-cont--first-type tables-cont--m-t-10-20">
        <ul class="cont__list">
            {% for item in items %}
          <li class="cont__item">
            <article class="table-card-first">
              <h1 class="table-card-first__title">{{ item.product__name }}</h1>
              <table class="table-first">
                <tr class="table__row">
                  <th>Общий план</th>
                  <td class="table__row">{{ item.total_planned }} шт</td>
                </tr>
                <tr class="table__row">
                  <th>Готово</th>
                  <td class="table__row">{{ item.total_produced }} шт</td>
                </tr>
                <tr class="table__row">
                  <th class="table__td-color table__td-color--menu-blue">
                    Осталось сделать
                  </th>
                  <td class="table__td-color table__td-color--orange-trans60">
                    {% with produced=item.total_produced|default:0 requested=item.total_requested|default:0 %}
                    {{ item.total_requested|add:item.total_produced_negative }}
                    {% if item.total_requested <= item.total_produced %}0{% endif %}
                    шт
                    {% endwith %}
                  </td>
                </tr>
              </table>
            </article>
          </li>
{% endfor %}
        </ul>
      </div>
      <!-- <div
        class="section__other-buttons-cont section__other-buttons-cont--flex-end section__other-buttons-cont--without-bottom-border m-top20"
      >
        <button onclick="window.print()"
          class="section__other-buttons-cont-button section__other-buttons-cont-button--orange"
        >
          <span>Печать задания</span>
          <span class="font-family-alt">&rarr;</span>
          <span class="content-size">
            <svg
              width="30"
              height="29"
              viewBox="0 0 30 29"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <rect
                width="30"
                height="29"
                rx="3"
                fill="#F28500"
                fill-opacity="0.6"
              />
              <mask
                id="mask0_664_4289"
                style="mask-type: luminance"
                maskUnits="userSpaceOnUse"
                x="4"
                y="4"
                width="22"
                height="21"
              >
                <path
                  d="M4.7793 4.31885H25.0012V24.6812H4.7793V4.31885Z"
                  fill="white"
                />
              </mask>
              <g mask="url(#mask0_664_4289)">
                <path
                  d="M21.2093 21.2875H8.5707C8.33815 21.2875 8.14941 21.4775 8.14941 21.7117V24.257C8.14941 24.4911 8.33815 24.6812 8.5707 24.6812H21.2093C21.4419 24.6812 21.6306 24.4911 21.6306 24.257V21.7117C21.6306 21.4775 21.4419 21.2875 21.2093 21.2875Z"
                  fill="white"
                />
                <path
                  d="M22.8947 10.2578C22.6622 10.2578 22.4734 10.4479 22.4734 10.682V13.2273C22.4734 13.929 21.9064 14.5 21.2095 14.5H8.5709C7.87409 14.5 7.30703 13.929 7.30703 13.2273V10.682C7.30703 10.4479 7.1183 10.2578 6.88574 10.2578C5.72383 10.2578 4.7793 11.2098 4.7793 12.3789V18.3179C4.7793 19.487 5.72383 20.439 6.88574 20.439H22.8947C24.0566 20.439 25.0012 19.487 25.0012 18.3179V12.3789C25.0012 11.2098 24.0566 10.2578 22.8947 10.2578ZM23.7373 12.8031C23.5047 12.8031 23.316 12.6131 23.316 12.3789C23.316 12.1447 23.5047 11.9547 23.7373 11.9547C23.9698 11.9547 24.1586 12.1447 24.1586 12.3789C24.1586 12.6131 23.9698 12.8031 23.7373 12.8031Z"
                  fill="white"
                />
                <path
                  d="M21.2093 4.31885H11.941C11.9216 4.31885 11.9056 4.32733 11.8871 4.32988C11.8686 4.33242 11.8525 4.33582 11.834 4.34091C11.7615 4.36042 11.6941 4.39181 11.6427 4.44442L8.27327 7.83644C8.22188 7.88819 8.1907 7.95606 8.17132 8.02903C8.16627 8.04685 8.1629 8.06297 8.16037 8.08163C8.15784 8.1003 8.14941 8.11727 8.14941 8.13678V13.2274C8.14941 13.4615 8.33815 13.6516 8.5707 13.6516H21.2093C21.4419 13.6516 21.6306 13.4615 21.6306 13.2274V4.74306C21.6306 4.5089 21.4419 4.31885 21.2093 4.31885ZM11.5197 5.76712V7.71257H9.5877L11.5197 5.76712Z"
                  fill="white"
                />
              </g>
            </svg>
          </span>
        </button>
      </div> -->
    </section>
  </main>
    {% endblock %}