{% extends "base.html" %}
{% block content %}
<main class="main">
  <section class="section catalog-users container">
    <div class="section__header">
      <h1 class="section__header-title flex-center">
        Список пользователей
        <span class="content-size">
          <svg
            width="33"
            height="33"
            viewBox="0 0 33 33"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M10.3171 18.0777C9.92237 18.2893 9.5355 18.5108 9.25119 18.6867C8.57112 19.0843 7.29013 19.8331 6.36472 20.7738C5.76752 21.3808 4.98245 22.3901 4.83633 23.7783C4.7912 24.207 4.81159 24.6174 4.88543 25.0073C4.95932 25.3975 4.99628 25.5926 4.89756 25.6949C4.79883 25.7972 4.63433 25.7722 4.30532 25.7221C2.89756 25.5079 1.94622 24.7405 1.16551 23.9037C0.581732 23.2781 0.280207 22.5584 0.35499 21.7888C0.425205 21.0661 0.811511 20.4842 1.19787 20.0588C1.80766 19.3872 2.70647 18.8182 3.24474 18.4774C3.35974 18.4046 3.45832 18.3422 3.53407 18.2915C5.56552 16.9306 7.98834 16.5291 10.2507 17.0871C10.7841 17.2186 11.0508 17.2843 11.0743 17.4718C11.0979 17.6593 10.8377 17.7987 10.3171 18.0777Z"
              fill="#00A6F2"
            />
            <path
              d="M8.92019 7.26868C9.18104 7.30791 9.31146 7.32751 9.37846 7.43586C9.44548 7.54423 9.39877 7.68812 9.30537 7.97594C9.06656 8.71177 8.9375 9.49706 8.9375 10.3125C8.9375 12.0174 9.50169 13.5906 10.4536 14.8555C10.6351 15.0968 10.7259 15.2174 10.698 15.3416C10.67 15.4657 10.5532 15.5268 10.3198 15.649C9.70098 15.973 8.9969 16.1562 8.25 16.1562C5.78197 16.1562 3.78125 14.1555 3.78125 11.6875C3.78125 9.21947 5.78197 7.21875 8.25 7.21875C8.47778 7.21875 8.70158 7.23579 8.92019 7.26868Z"
              fill="#00A6F2"
            />
            <path
              d="M22.6835 18.0777C23.0782 18.2893 23.4652 18.5108 23.7494 18.6867C24.4296 19.0843 25.7105 19.8331 26.6359 20.7738C27.2331 21.3808 28.0182 22.3901 28.1644 23.7783C28.2095 24.207 28.189 24.6174 28.1151 25.0073C28.0413 25.3975 28.0043 25.5926 28.103 25.6949C28.2018 25.7972 28.3664 25.7722 28.6954 25.7221C30.1031 25.5079 31.0545 24.7405 31.8351 23.9037C32.4189 23.2781 32.7204 22.5584 32.6456 21.7888C32.5754 21.0661 32.1891 20.4842 31.8028 20.0588C31.1929 19.3872 30.2942 18.8182 29.7559 18.4774C29.6408 18.4046 29.5423 18.3422 29.4666 18.2915C27.4351 16.9306 25.0123 16.5291 22.7499 17.0871C22.2165 17.2186 21.9499 17.2843 21.9263 17.4718C21.9028 17.6593 22.163 17.7987 22.6835 18.0777Z"
              fill="#00A6F2"
            />
            <path
              d="M22.5472 14.8555C22.3656 15.0968 22.2748 15.2174 22.3029 15.3416C22.3308 15.4657 22.4475 15.5268 22.681 15.649C23.2997 15.973 24.0039 16.1562 24.7508 16.1562C27.2188 16.1562 29.2195 14.1555 29.2195 11.6875C29.2195 9.21947 27.2188 7.21875 24.7508 7.21875C24.5229 7.21875 24.2992 7.23579 24.0806 7.26868C23.8198 7.30791 23.6893 7.32751 23.6223 7.43586C23.5554 7.54423 23.602 7.68812 23.6955 7.97594C23.9342 8.71177 24.0633 9.49706 24.0633 10.3125C24.0633 12.0174 23.4991 13.5906 22.5472 14.8555Z"
              fill="#00A6F2"
            />
            <path
              d="M10.5755 19.9008C14.2024 17.6581 18.8029 17.6581 22.4297 19.9008C22.5367 19.967 22.6721 20.0462 22.8278 20.1372C23.5322 20.5494 24.6502 21.2036 25.4132 21.9793C25.8925 22.4663 26.3705 23.1304 26.4575 23.9583C26.5509 24.8439 26.1748 25.6639 25.4577 26.3734C24.273 27.5454 22.8054 28.5313 20.8812 28.5313H12.1241C10.1999 28.5313 8.7323 27.5454 7.54757 26.3734C6.83041 25.6639 6.45449 24.8439 6.54771 23.9583C6.63486 23.1304 7.11281 22.4663 7.59203 21.9793C8.35501 21.2036 9.47315 20.5494 10.1775 20.1372C10.3331 20.0462 10.4686 19.967 10.5755 19.9008Z"
              fill="#00A6F2"
            />
            <path
              d="M10.6587 10.3125C10.6587 7.08509 13.275 4.46875 16.5024 4.46875C19.7298 4.46875 22.3462 7.08509 22.3462 10.3125C22.3462 13.5399 19.7298 16.1562 16.5024 16.1562C13.275 16.1562 10.6587 13.5399 10.6587 10.3125Z"
              fill="#00A6F2"
            />
          </svg>
        </span>
      </h1>
      <div
        class="section__header-buttons-cont section__header-buttons-cont--alt"
      >
        <a href="{% url 'create_user' %}" class="section__header-button button button--blue">
          Добавить пользователя +
        </a>
        <a href="{% url 'start-page' %}" class="section__header-button button button--orange">
          Назад
        </a>
      </div>
    </div>
    <div class="tables-cont tables-cont--first-type tables-cont--without-m-t">
      <ul class="cont__list">
        {% for user_obj in users %}
        <li class="cont__item">
          <article class="table-card-first">
            <h1 class="table-card-first__title">{{ user_obj.get_full_name|default:"-" }} ({{ user_obj.username }})</h1>
            <table class="table-first">
              <tr class="table__row">
                <th>Роль</th>
                {% for group in user_obj.groups.all %}
                <td
                  class="table__row--color table__td-color--orange-trans60"
                >
                {{ group.name }}
                </td>
                {% empty %}
                <td
                class="table__row--color table__td-color--orange-trans60"
              >
              Нет роли
              </td>
                {% endfor %}
              </tr>
              <tr class="table__row">
                <th>Телефон</th>
                <td
                  class="table__row--color table__td-color--orange-trans60"
                >
                {{ user_obj.profile.phone|default:"-" }}
                </td>
              </tr>
              <tr class="table__row">
                <td class="table__td-buttons-cont">
                  <a href="{% url 'edit_user' user_obj.pk %}"
                    title="Редактировать"
                    class="table__button-with-icon content-size"
                  >
                    <svg
                      width="30"
                      height="30"
                      viewBox="0 0 30 30"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <rect
                        width="30"
                        height="30"
                        rx="3"
                        fill="#00A6F2"
                        fill-opacity="0.6"
                      />
                      <path
                        d="M23.5764 8.71494L20.3481 5.48667C20.0326 5.17111 19.5225 5.17111 19.2069 5.48667L16.7857 7.90787L21.1552 12.2773L23.5764 9.85613C23.892 9.54057 23.892 9.0305 23.5764 8.71494ZM7.10093 17.5927C7.01296 17.6806 6.94598 17.7888 6.90643 17.9082L6.83137 18.131L10.0927 21.3915C10.0927 21.3915 9.28566 22.1986 8.4794 21.3923L6.42784 19.3416L5.29149 22.7506C5.19464 23.0404 5.27051 23.3608 5.48599 23.5763C5.64014 23.7296 5.84675 23.8127 6.0574 23.8127C6.14214 23.8127 6.2293 23.799 6.31243 23.7708L11.1548 22.1566C11.2735 22.1171 11.3816 22.0501 11.4704 21.9621L20.3481 13.0844L15.9787 8.71494L7.10093 17.5927Z"
                        fill="white"
                      />
                    </svg>
                  </a>
                  <a href="{% url 'delete_user' user_obj.pk %}"
                    title="Удалить"
                    class="table__button-with-icon content-size"
                    onclick="return confirm('Вы уверены, что хотите деактивировать пользователя?')"
                  >
                    <svg
                      width="30"
                      height="30"
                      viewBox="0 0 30 30"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <rect
                        width="30"
                        height="30"
                        rx="3"
                        fill="#F28500"
                        fill-opacity="0.6"
                      />
                      <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M24 7.75C24.414 7.75 24.75 8.086 24.75 8.5C24.75 8.914 24.414 9.25 24 9.25H6C5.586 9.25 5.25 8.914 5.25 8.5C5.25 8.086 5.586 7.75 6 7.75H24Z"
                        fill="white"
                      />
                      <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M19.636 6.245L20.221 8.294C20.286 8.52 20.24 8.764 20.099 8.952C19.957 9.14 19.735 9.25 19.5 9.25H10.5C10.265 9.25 10.043 9.14 9.90096 8.952C9.75996 8.764 9.71396 8.52 9.77896 8.294L10.364 6.245C10.702 5.064 11.781 4.25 13.009 4.25H16.991C18.219 4.25 19.298 5.064 19.636 6.245ZM18.193 6.657C18.04 6.12 17.55 5.75 16.991 5.75H13.009C12.45 5.75 11.96 6.12 11.807 6.657L11.494 7.75H18.506L18.193 6.657Z"
                        fill="white"
                      />
                      <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M23.145 10.25L22.363 23.166C22.275 24.618 21.072 25.75 19.618 25.75H10.382C8.92798 25.75 7.72498 24.618 7.63698 23.166L6.85498 10.25H23.145ZM12.246 20.91L11.549 13.941C11.508 13.529 11.14 13.228 10.728 13.269C10.316 13.31 10.015 13.678 10.056 14.09L10.754 21.059C10.795 21.471 11.163 21.772 11.575 21.731C11.987 21.69 12.287 21.322 12.246 20.91ZM19.246 21.059L19.944 14.09C19.985 13.678 19.684 13.31 19.272 13.269C18.86 13.228 18.492 13.529 18.451 13.941L17.754 20.91C17.713 21.322 18.013 21.69 18.425 21.731C18.837 21.772 19.205 21.471 19.246 21.059ZM14.25 14V21C14.25 21.414 14.586 21.75 15 21.75C15.414 21.75 15.75 21.414 15.75 21V14C15.75 13.586 15.414 13.25 15 13.25C14.586 13.25 14.25 13.586 14.25 14Z"
                        fill="white"
                      />
                    </svg>
                  </a>
                </td>
              </tr>
            </table>
          </article>
        </li>
        {% endfor %}

      </ul>
      {% if is_paginated %}
      <div class="pagination">
        <!-- для выделения активной кнопки добавляем кнопке класс pagination__button--active -->
        <div class="pagination__block">
          {% if page_obj.has_previous %}
          <a class="pagination__button" href="?page=1">
            <span class="content-size">
              <svg
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M11.8497 17.5C11.859 17.5 11.864 17.4888 11.8572 17.4819L4.37528 10L11.8572 2.51812C11.864 2.51125 11.859 2.5 11.8497 2.5H8.75028L1.38278 9.8675C1.30965 9.94063 1.30965 10.0594 1.38278 10.1325L8.75028 17.5H11.8497Z"
                  fill="white"
                />
                <path
                  d="M18.7247 17.5C18.734 17.5 18.739 17.4888 18.7322 17.4819L11.2503 10L18.7322 2.51812C18.739 2.51125 18.734 2.5 18.7247 2.5H15.6253L8.25778 9.8675C8.18465 9.94063 8.18465 10.0594 8.25778 10.1325L15.6253 17.5H18.7247Z"
                  fill="white"
                />
              </svg>
            </span>
          </a>
          <a class="pagination__button" href="?page={{ page_obj.previous_page_number }}">
            <span class="content-size">
              <svg
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M14.9903 17.5C14.9997 17.5 15.0047 17.4888 14.9978 17.4819L7.5159 10L14.9978 2.51812C15.0047 2.51125 14.9997 2.5 14.9903 2.5H11.8909L4.5234 9.8675C4.45028 9.94063 4.45028 10.0594 4.5234 10.1325L11.8909 17.5H14.9903Z"
                  fill="white"
                />
              </svg>
            </span>
          </a>
          {% endif %}
        </div>
  
    <div class="pagination__block">
    {% for num in page_obj.paginator.page_range %}
    {% if page_obj.number == num %}
          <button
            class="pagination__button pagination__button--active"
            type="button"
          >
            <span class="content-size">{{ num }}</span>
          </button>
          {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
          <a href="?page={{ num }}"
          class="pagination__button pagination__button"
          type="button"
        >
          <span class="content-size">{{ num }}</span>
        </a>
        {% endif %}
        {% endfor %}
    </div>
  
    {% if page_obj.has_next %}
        <div class="pagination__block">
          <a class="pagination__button" href="?page={{ page_obj.next_page_number }}">
            <span class="content-size">
              <svg
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M5.00972 17.5C5.00035 17.5 4.99535 17.4888 5.00222 17.4819L12.4841 10L5.00222 2.51812C4.99535 2.51125 5.00035 2.5 5.00972 2.5H8.1091L15.4766 9.8675C15.5497 9.94063 15.5497 10.0594 15.4766 10.1325L8.1091 17.5H5.00972Z"
                  fill="white"
                />
              </svg>
            </span>
          </a>
  
  
          <a class="pagination__button" href="?page={{ page_obj.paginator.num_pages }}">
            <span class="content-size">
              <svg
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M8.15035 17.5C8.14097 17.5 8.13597 17.4888 8.14285 17.4819L15.6247 10L8.14285 2.51812C8.13597 2.51125 8.14097 2.5 8.15035 2.5H11.2497L18.6172 9.8675C18.6903 9.94063 18.6903 10.0594 18.6172 10.1325L11.2497 17.5H8.15035Z"
                  fill="white"
                />
                <path
                  d="M1.27535 17.5C1.26597 17.5 1.26097 17.4888 1.26785 17.4819L8.74972 10L1.26785 2.51812C1.26097 2.51125 1.26597 2.5 1.27535 2.5H4.37472L11.7422 9.8675C11.8153 9.94063 11.8153 10.0594 11.7422 10.1325L4.37472 17.5H1.27535Z"
                  fill="white"
                />
              </svg>
            </span>
          </a>
        </div>
        {% endif %}
      </div>
      {% endif %}
    </div>
  </section>
</main>
{% endblock %}