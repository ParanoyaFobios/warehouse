{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Центральная панель</title>
    <link rel="stylesheet" href="{% static '/styles/normalize.css' %}"/>
    <link rel="stylesheet" href="{% static '/styles/fonts.css' %}"/>
    <link rel="stylesheet" href="{% static '/styles/style.css' %}"/>
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"> -->
    <script src="https://unpkg.com/@zxing/library@latest/umd/index.min.js"></script>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
  </head>
  <body>
    <header class="header">
      <nav class="header-nav container">
        <details class="header-nav__account-button closing-accordion">
          <summary class="hidden-summary-arrow">
            <span class="header-nav__account-icon-wrapper content-size">
              <svg class="avatar" viewBox="0 0 40 40" width="40" height="40">
                <use href="{% static user_avatar %}"></use>
              </svg>
            </span>
          </summary>
          <ul class="header-nav__account-links-list">
            <li class="header-nav__account-links-item">
              <a href="{% url 'user_list' %}" class="header-nav__account-link">
                <span
                  class="header-nav__account-link-icon-wrapper content-size"
                >
                  <svg
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M7.50337 13.1474C7.21627 13.3013 6.93491 13.4624 6.72814 13.5903C6.23354 13.8795 5.30191 14.4241 4.62889 15.1082C4.19456 15.5497 3.6236 16.2837 3.51733 17.2933C3.48451 17.6051 3.49934 17.9036 3.55304 18.1871C3.60678 18.4709 3.63366 18.6128 3.56186 18.6872C3.49006 18.7616 3.37042 18.7434 3.13114 18.707C2.10732 18.5512 1.41543 17.9931 0.847642 17.3845C0.423078 16.9295 0.203787 16.4061 0.258175 15.8464C0.30924 15.3208 0.59019 14.8976 0.871177 14.5882C1.31466 14.0998 1.96834 13.686 2.35981 13.4381C2.44345 13.3852 2.51514 13.3398 2.57023 13.3029C4.04765 12.3132 5.8097 12.0212 7.45505 12.427C7.84296 12.5226 8.03691 12.5704 8.05406 12.7068C8.0712 12.8431 7.88193 12.9445 7.50337 13.1474Z"
                      fill="#00A6F2"
                    />
                    <path
                      d="M6.48741 5.28631C6.67712 5.31484 6.77197 5.3291 6.8207 5.4079C6.86944 5.48671 6.83547 5.59136 6.76754 5.80068C6.59386 6.33583 6.5 6.90695 6.5 7.5C6.5 8.73995 6.91032 9.88407 7.60259 10.804C7.73465 10.9795 7.80068 11.0672 7.78033 11.1575C7.75999 11.2478 7.67509 11.2922 7.5053 11.3811C7.05526 11.6167 6.5432 11.75 6 11.75C4.20507 11.75 2.75 10.2949 2.75 8.5C2.75 6.70507 4.20507 5.25 6 5.25C6.16566 5.25 6.32842 5.26239 6.48741 5.28631Z"
                      fill="#00A6F2"
                    />
                    <path
                      d="M16.4971 13.1474C16.7842 13.3013 17.0656 13.4624 17.2723 13.5903C17.767 13.8795 18.6986 14.4241 19.3716 15.1082C19.8059 15.5497 20.3769 16.2837 20.4832 17.2933C20.516 17.6051 20.5011 17.9036 20.4474 18.1871C20.3937 18.4709 20.3668 18.6128 20.4386 18.6872C20.5104 18.7616 20.6301 18.7434 20.8694 18.707C21.8932 18.5512 22.5851 17.9931 23.1528 17.3845C23.5774 16.9295 23.7967 16.4061 23.7423 15.8464C23.6912 15.3208 23.4103 14.8976 23.1293 14.5882C22.6858 14.0998 22.0322 13.686 21.6407 13.4381C21.557 13.3852 21.4853 13.3398 21.4303 13.3029C19.9528 12.3132 18.1908 12.0212 16.5454 12.427C16.1575 12.5226 15.9636 12.5704 15.9464 12.7068C15.9293 12.8431 16.1186 12.9445 16.4971 13.1474Z"
                      fill="#00A6F2"
                    />
                    <path
                      d="M16.3977 10.804C16.2656 10.9795 16.1996 11.0672 16.22 11.1575C16.2403 11.2478 16.3252 11.2922 16.495 11.3811C16.945 11.6167 17.4571 11.75 18.0003 11.75C19.7952 11.75 21.2503 10.2949 21.2503 8.5C21.2503 6.70507 19.7952 5.25 18.0003 5.25C17.8346 5.25 17.6719 5.26239 17.5129 5.28631C17.3232 5.31484 17.2283 5.3291 17.1796 5.4079C17.1309 5.48671 17.1648 5.59136 17.2328 5.80068C17.4064 6.33583 17.5003 6.90695 17.5003 7.5C17.5003 8.73995 17.09 9.88407 16.3977 10.804Z"
                      fill="#00A6F2"
                    />
                    <path
                      d="M7.69146 14.4733C10.3292 12.8422 13.675 12.8422 16.3127 14.4733C16.3905 14.5214 16.489 14.579 16.6022 14.6452C17.1145 14.945 17.9276 15.4208 18.4825 15.9849C18.8311 16.3391 19.1787 16.8221 19.242 17.4242C19.3099 18.0683 19.0364 18.6646 18.5149 19.1806C17.6533 20.033 16.5859 20.75 15.1865 20.75H8.81773C7.41827 20.75 6.35094 20.033 5.48932 19.1806C4.96775 18.6646 4.69435 18.0683 4.76215 17.4242C4.82553 16.8221 5.17313 16.3391 5.52165 15.9849C6.07655 15.4208 6.88974 14.945 7.40201 14.6452C7.51518 14.579 7.6137 14.5214 7.69146 14.4733Z"
                      fill="#00A6F2"
                    />
                    <path
                      d="M7.75195 7.5C7.75195 5.15279 9.65474 3.25 12.002 3.25C14.3492 3.25 16.252 5.15279 16.252 7.5C16.252 9.84721 14.3492 11.75 12.002 11.75C9.65474 11.75 7.75195 9.84721 7.75195 7.5Z"
                      fill="#00A6F2"
                    />
                  </svg>
                </span>
                Пользователи
              </a>
            </li>
            <li class="eader-nav__account-links-item">
              <a href="{% url 'logout' %}" class="header-nav__account-link">
                <span
                  class="header-nav__account-link-icon-wrapper content-size"
                >
                  <svg
                    width="25"
                    height="25"
                    viewBox="0 0 25 25"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <g clip-path="url(#clip0_421_3643)">
                      <path
                        d="M8.92096 3.99902L1.30377 0C0.638782 0.248975 6.10352e-05 1.06494 6.10352e-05 2.00684V19.082C6.10352e-05 19.8291 0.366272 20.5029 0.981458 20.913L6.84083 24.6305C8.24176 25.5829 10.254 24.5954 10.254 22.7994V6.03516C10.254 5.17085 9.77052 4.42378 8.92096 3.99902ZM7.32428 13.9648C7.32428 14.3697 6.99669 14.6973 6.59186 14.6973C6.18702 14.6973 5.85944 14.3697 5.85944 13.9648V11.0352C5.85944 10.6303 6.18702 10.3027 6.59186 10.3027C6.99669 10.3027 7.32428 10.6303 7.32428 11.0352V13.9648Z"
                        fill="#F28500"
                      />
                      <path
                        d="M24.7104 11.9165L19.5609 8.32148C19.0995 7.86006 18.3106 8.18682 18.3106 8.83931V11.0352H12.4512C12.0467 11.0352 11.7188 11.363 11.7188 11.7676V13.2324C11.7188 13.6369 12.0467 13.9648 12.4512 13.9648H18.3106V16.1606C18.3106 16.8131 19.0994 17.1399 19.5609 16.6785L24.7104 13.0833C25.0965 12.7903 25.0965 12.2096 24.7104 11.9165Z"
                        fill="#F28500"
                      />
                      <path
                        d="M11.7188 15.4297V22.0703H13.9161C15.1277 22.0703 16.1133 21.0847 16.1133 19.873V15.4297C13.5447 15.4297 14.2922 15.4297 11.7188 15.4297Z"
                        fill="#F28500"
                      />
                      <path
                        d="M13.916 0H4.45493L9.57314 2.68721L9.57592 2.68862C9.57612 2.68872 9.57617 2.68887 9.57617 2.68887L9.60165 2.7022C10.9177 3.35957 11.7188 4.61055 11.7188 6.03535V9.57031C14.2921 9.57031 13.5447 9.57031 16.1133 9.57031V2.19727C16.1133 0.985645 15.1277 0 13.916 0Z"
                        fill="#F28500"
                      />
                    </g>
                    <defs>
                      <clipPath id="clip0_421_3643">
                        <rect width="25" height="25" fill="white" />
                      </clipPath>
                    </defs>
                  </svg>
                </span>
                Выход
              </a>
            </li>
          </ul>
        </details>
        <div class="search-bar">
          <form
            class="search-bar__form"
            action="{% url 'global_search' %}"
            method="get"
            id="filter-form"
          >
          {{ global_search_form.q }}
            <button
              class="search-bar__elem button button--blue search-bar__button-loupe"
              type="submit"
            >
              <svg
                width="24"
                height="25"
                viewBox="0 0 24 25"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M23.1503 22.771L17.4804 16.5827C18.9382 14.7641 19.737 12.4759 19.737 10.0937C19.737 4.52814 15.422 0 10.1185 0C4.81494 0 0.5 4.52814 0.5 10.0937C0.5 15.6593 4.81494 20.1875 10.1185 20.1875C12.1095 20.1875 14.0069 19.5573 15.6291 18.361L21.342 24.5963C21.5808 24.8565 21.902 25 22.2462 25C22.5719 25 22.881 24.8697 23.1156 24.6327C23.6141 24.1293 23.63 23.2946 23.1503 22.771ZM10.1185 2.63315C14.0387 2.63315 17.2278 5.97988 17.2278 10.0937C17.2278 14.2076 14.0387 17.5543 10.1185 17.5543C6.19833 17.5543 3.00917 14.2076 3.00917 10.0937C3.00917 5.97988 6.19833 2.63315 10.1185 2.63315Z"
                  fill="white"
                />
              </svg>
            </button>
            <button
              class="search-bar__elem button button--orange search-bar__button-scanner"
              type="button"
              title="Сканировать штрихкод"
              id="global-scan-btn"
            >
              <svg
                width="30"
                height="31"
                viewBox="0 0 30 31"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <g clip-path="url(#clip0_183_868)">
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M24.3409 14.2615H14.8155L13.884 11.7483H19.7715C24.0246 11.7483 26.6608 7.23159 24.7979 3.57606C24.7627 3.52333 24.6397 3.29486 24.464 2.99609C27.522 3.06639 29.9824 5.562 29.9824 8.63757C29.9824 11.7483 27.4517 14.2615 24.3409 14.2615ZM13.638 11.0453L10.6503 2.99609H23.6731C23.9192 3.45304 24.1301 3.83968 24.1652 3.8924C25.7996 7.091 23.4974 11.0453 19.7715 11.0453H13.638ZM14.0773 14.2615H10.58C10.4394 14.2615 10.2988 14.1736 10.246 14.033L6.36204 3.47061C6.27416 3.24214 6.44991 2.99609 6.69596 2.99609H9.91213L13.058 11.5198V11.555L14.0773 14.2615Z"
                    fill="white"
                  />
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M27.1178 27.5306H22.2847C21.8102 27.5306 21.4411 27.144 21.4411 26.687V24.3496C21.5466 24.4023 21.6696 24.4199 21.7926 24.4199H27.6098C27.7329 24.4199 27.8383 24.4023 27.9613 24.3672V26.687C27.9613 27.144 27.5747 27.5306 27.1178 27.5306Z"
                    fill="white"
                  />
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M27.6099 23.84H21.7926C21.6345 23.84 21.5114 23.7522 21.4587 23.594L18.4886 14.8594H24.341C24.587 14.8594 24.8155 14.8418 25.0264 14.8242C25.8875 17.3374 27.9613 23.3655 27.9613 23.4885C27.9613 23.6819 27.8032 23.84 27.6099 23.84Z"
                    fill="white"
                  />
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M18.5061 16.7047H17.2935C16.6959 16.7047 16.2039 16.2126 16.2039 15.6151V14.8594H17.8735L18.5061 16.7047Z"
                    fill="white"
                  />
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M13.5325 26.3704H2.82952C2.2847 26.3704 1.84534 25.9134 1.84534 25.3686V18.7078C1.84534 18.163 2.2847 17.7236 2.82952 17.7236H13.5325C14.0773 17.7236 14.5167 18.163 14.5167 18.7078V25.3686C14.5167 25.9134 14.0773 26.3704 13.5325 26.3704ZM3.9543 24.525C3.76098 24.525 3.60281 24.3669 3.60281 24.1735V19.9029C3.60281 19.446 4.30579 19.446 4.30579 19.9029V24.1735C4.30579 24.3669 4.14762 24.525 3.9543 24.525ZM6.06326 24.525C5.86994 24.525 5.71177 24.3669 5.71177 24.1735V19.9029C5.71177 19.446 6.41476 19.446 6.41476 19.9029V24.1735C6.41476 24.3669 6.25659 24.525 6.06326 24.525ZM8.17223 24.525C7.97891 24.525 7.82073 24.3669 7.82073 24.1735V19.9029C7.82073 19.446 8.52372 19.446 8.52372 19.9029V24.1735C8.52372 24.3669 8.38312 24.525 8.17223 24.525ZM10.2988 24.525C10.1054 24.525 9.94727 24.3669 9.94727 24.1735V19.9029C9.94727 19.446 10.6503 19.446 10.6503 19.9029V24.1735C10.6503 24.3669 10.4921 24.525 10.2988 24.525ZM12.4077 24.525C12.2144 24.525 12.0562 24.3669 12.0562 24.1735V19.9029C12.0562 19.446 12.7592 19.446 12.7592 19.9029V24.1735C12.7592 24.3669 12.6011 24.525 12.4077 24.525Z"
                    fill="white"
                  />
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M0.369073 19.5862C-0.492087 19.5862 -0.28119 18.3384 -0.28119 17.7936C-0.28119 16.6863 0.615119 15.79 1.72232 15.79H3.2689C4.11248 15.79 4.11248 17.073 3.2689 17.073H1.72232C1.33568 17.073 1.00176 17.4069 1.00176 17.7936C1.00176 18.3384 1.23023 19.5862 0.369073 19.5862ZM15.993 19.5862C15.1318 19.5862 15.3603 18.3384 15.3603 17.7936C15.3603 17.4069 15.0264 17.073 14.6397 17.073H13.0932C12.2496 17.073 12.2496 15.79 13.0932 15.79H14.6397C15.7469 15.79 16.6432 16.6863 16.6432 17.7936C16.6432 18.3384 16.8541 19.5862 15.993 19.5862ZM3.2689 28.2856H1.72232C0.615119 28.2856 -0.28119 27.3893 -0.28119 26.2821C-0.28119 25.7373 -0.492087 24.5071 0.369073 24.5071C1.23023 24.5071 1.00176 25.7373 1.00176 26.2821C1.00176 26.6864 1.33568 27.0027 1.72232 27.0027H3.2689C4.11248 27.0027 4.11248 28.2856 3.2689 28.2856ZM14.6397 28.2856H13.0932C12.2496 28.2856 12.2496 27.0027 13.0932 27.0027H14.6397C15.0264 27.0027 15.3603 26.6864 15.3603 26.2821C15.3603 25.7373 15.1318 24.5071 15.993 24.5071C16.8541 24.5071 16.6432 25.7373 16.6432 26.2821C16.6432 27.3893 15.7469 28.2856 14.6397 28.2856Z"
                    fill="white"
                  />
                </g>
                <defs>
                  <clipPath id="clip0_183_868">
                    <rect
                      width="30"
                      height="30"
                      fill="white"
                      transform="translate(0 0.5)"
                    />
                  </clipPath>
                </defs>
              </svg>
            </button>
            <div
              id="scanner-status"
              style="display: none; text-align: center"
            ></div>
          </form>
          <video
            id="video-stream"
            style="
              display: none;
              width: 100%;
              max-width: 400px;
              margin-bottom: 1rem;
              border-radius: 8px;
            "
          ></video>
        </div>
        <details class="overlay-menu closing-accordion">
          <summary class="overlay-menu__summary hidden-summary-arrow">
            <div class="overlay-menu__icon-cont">
              <span class="overlay-menu__icon-wrapper content-size">
                <!-- этот ниже - бадж, его можно удалить програмно или програмно добавить ему класс visually-hidden: -->
                {% if unread_messages_count > 0 %}
                <span class="overlay-menu__icon-badge">{{ unread_messages_count }}</span>
                {% endif %}
                <svg
                  width="36"
                  height="37"
                  viewBox="0 0 36 37"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M23.5732 3.2002H28.9053C31.3284 3.2002 33.2998 5.17158 33.2998 7.59473V12.9268C33.2998 15.3499 31.3284 17.3213 28.9053 17.3213H23.5732C21.1501 17.3213 19.1787 15.3499 19.1787 12.9268V7.59473C19.1787 5.17158 21.1501 3.2002 23.5732 3.2002Z"
                    fill="#00A6F2"
                  />
                  <path
                    d="M7.69434 19.0791H13.0264C15.4495 19.0791 17.4209 21.0505 17.4209 23.4736V28.8057C17.4209 31.2288 15.4495 33.2002 13.0264 33.2002H7.69434C5.27119 33.2002 3.2998 31.2288 3.2998 28.8057V23.4736C3.2998 21.0505 5.27119 19.0791 7.69434 19.0791Z"
                    fill="#00A6F2"
                  />
                  <path
                    d="M7.69434 3.2002H13.0264C15.4495 3.2002 17.4209 5.17158 17.4209 7.59473V12.9268C17.4209 16.3192 20.1808 19.0791 23.5732 19.0791H28.9053C31.3284 19.0791 33.2998 21.0505 33.2998 23.4736V28.8057C33.2998 31.2288 31.3284 33.2002 28.9053 33.2002H23.5732C21.1501 33.2002 19.1787 31.2288 19.1787 28.8057V23.4736C19.1787 20.0812 16.4188 17.3213 13.0264 17.3213H7.69434C5.27119 17.3213 3.2998 15.3499 3.2998 12.9268V7.59473C3.2998 5.17158 5.27119 3.2002 7.69434 3.2002Z"
                    fill="#F28500"
                  />
                </svg>
              </span>
            </div>
          </summary>
          <div class="overlay-menu__body">
            <ul class="overlay-menu__links-list">
                <!--главная-->
              <li class="overlay-menu__links-item">
                <a href="{% url 'start-page' %}" class="overlay-menu__link overlay-menu__link--home">
                  <span class="overlay-menu__link-icon-wrapper content-size">
                    <svg
                      width="51"
                      height="50"
                      viewBox="0 0 51 50"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M43.0167 22.3824C42.4694 22.3823 41.935 22.2154 41.4848 21.9041L26.5021 11.5293C26.2083 11.3267 25.8598 11.2182 25.503 11.2182C25.1461 11.2182 24.7977 11.3267 24.5039 11.5293L9.52252 21.9041C8.93469 22.3111 8.20925 22.4679 7.50578 22.3401C6.80232 22.2122 6.17846 21.8101 5.77145 21.2223C5.36443 20.6345 5.2076 19.909 5.33546 19.2056C5.46331 18.5021 5.86538 17.8783 6.45321 17.4712L21.4359 7.09651C22.6326 6.27376 24.0507 5.83331 25.503 5.83331C26.9552 5.83331 28.3733 6.27376 29.57 7.09651L44.5541 17.4712C45.0269 17.7982 45.3828 18.2678 45.5697 18.8114C45.7566 19.355 45.7648 19.9441 45.5931 20.4927C45.4214 21.0413 45.0787 21.5206 44.6152 21.8606C44.1517 22.2005 43.5916 22.3834 43.0167 22.3824Z"
                        fill="#767676"
                      />
                      <path
                        d="M41.6689 26.4784V42.6603C41.6689 43.3571 41.3921 44.0254 40.8993 44.5181C40.4066 45.0108 39.7383 45.2877 39.0415 45.2877H31.6418C31.2637 45.2877 30.9011 45.1375 30.6338 44.8701C30.3664 44.6028 30.2162 44.2402 30.2162 43.8621V37.8771C30.2108 36.6583 29.7361 35.4884 28.8909 34.6103C28.0456 33.7322 26.8947 33.2133 25.677 33.1613C25.0275 33.1645 24.3852 33.2963 23.7869 33.5491C23.1887 33.8018 22.6465 34.1707 22.1916 34.6342C21.7368 35.0977 21.3782 35.6468 21.1367 36.2496C20.8952 36.8525 20.7756 37.4972 20.7847 38.1466V43.8675C20.7832 44.2447 20.6324 44.6059 20.3652 44.872C20.0981 45.1382 19.7363 45.2877 19.3591 45.2877H11.9594C11.2626 45.2877 10.5943 45.0108 10.1016 44.5181C9.60884 44.0254 9.33203 43.3571 9.33203 42.6603V26.4919C9.33174 26.0584 9.4386 25.6315 9.64311 25.2493C9.84762 24.8671 10.1434 24.5413 10.5042 24.3011L24.0453 15.2737C24.4752 14.9838 24.9819 14.829 25.5005 14.829C26.019 14.829 26.5257 14.9838 26.9556 15.2737L40.5034 24.3011C40.8616 24.5402 41.1554 24.8641 41.3587 25.2438C41.562 25.6236 41.6685 26.0476 41.6689 26.4784Z"
                        fill="#767676"
                      />
                    </svg>
                  </span>
                  Главная
                </a>
              </li>
                <!--материалы-->
              <li class="overlay-menu__links-item">
                <a
                href="{% url 'material_list' %}"
                  class="overlay-menu__link overlay-menu__link--materials"
                >
                  <span class="overlay-menu__link-icon-wrapper content-size">
                    <svg
                      width="51"
                      height="50"
                      viewBox="0 0 51 50"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M18.0788 26.4264C21.4955 26.4264 24.2651 23.6568 24.2651 20.2401C24.2651 16.8234 21.4955 14.0538 18.0788 14.0538C17.7106 14.0538 17.3499 14.086 16.9995 14.1476C16.9973 14.148 16.9955 14.1484 16.9934 14.1489L16.1833 14.3498C16.1812 14.3503 16.1794 14.3509 16.1773 14.3515C15.2337 14.656 14.3892 15.1809 13.7045 15.8656C11.2888 18.2813 11.2887 22.1986 13.7045 24.6144C14.8238 25.734 16.3704 26.4264 18.0788 26.4264ZM37.9634 39.7055H9.29319C6.67549 39.7055 5.39349 42.899 7.22649 44.732C7.75669 45.2621 8.48799 45.5908 9.29319 45.5908H39.2477C40.2368 45.5908 40.7657 44.3816 40.0458 43.6618C39.8405 43.4565 39.558 43.3291 39.2477 43.3291H11.3992C11.0231 43.3291 10.7183 43.0242 10.7183 42.6482C10.7183 42.2721 11.0232 41.9673 11.3992 41.9673H39.2477C40.2368 41.9673 40.7657 40.7582 40.0458 40.0383C39.8405 39.833 39.558 39.7056 39.2477 39.7056H37.9634V39.7055ZM11.2116 28.6239C13.1629 28.6239 14.7451 30.206 14.7451 32.1574C14.7451 34.1088 13.1629 35.6909 11.2116 35.6909C9.26019 35.6909 7.67809 34.1087 7.67809 32.1574C7.67809 30.2061 9.26019 28.6239 11.2116 28.6239ZM11.2116 25.9711C14.6283 25.9711 17.3979 28.7407 17.3979 32.1574C17.3979 35.5701 14.6303 38.3388 11.2297 38.3437C7.79749 38.3486 5.02539 35.5788 5.02539 32.1574C5.02529 28.7407 7.79489 25.9711 11.2116 25.9711ZM13.3832 32.1574C13.3832 30.2283 11.0402 29.2576 9.67599 30.6218C8.31179 31.986 9.28249 34.329 11.2116 34.329C12.411 34.329 13.3832 33.3569 13.3832 32.1574ZM27.1176 32.1574C27.1176 30.2283 24.7746 29.2576 23.4104 30.6218C22.0461 31.9861 23.0169 34.329 24.946 34.329C26.1455 34.329 27.1176 33.3569 27.1176 32.1574ZM31.1323 32.1574C31.1323 33.8657 30.4399 35.4124 29.3204 36.5318C26.9044 38.9477 22.9875 38.9477 20.5716 36.5318C18.1558 34.116 18.1558 30.1988 20.5716 27.783C21.1365 27.2182 21.8101 26.762 22.5584 26.4487C22.5611 26.4476 22.5635 26.4467 22.5663 26.4458L23.6401 26.1096C23.6429 26.1087 23.6454 26.1081 23.6483 26.1075C24.0668 26.0182 24.501 25.9712 24.9461 25.9712C28.3627 25.9711 31.1323 28.7407 31.1323 32.1574ZM24.946 28.6239C26.8973 28.6239 28.4795 30.206 28.4795 32.1574C28.4795 34.1088 26.8973 35.6909 24.946 35.6909C22.9947 35.6909 21.4125 34.1087 21.4125 32.1574C21.4125 30.2061 22.9947 28.6239 24.946 28.6239ZM36.4542 22.0976L27.5328 24.8908C27.495 24.9026 27.4701 24.9357 27.4692 24.9753C27.4683 25.0149 27.4917 25.0491 27.5289 25.0627C28.5743 25.4434 29.512 26.0487 30.2834 26.8201C31.6444 28.1811 32.4882 30.0594 32.4943 32.1347C32.4943 32.138 32.4945 32.1408 32.4948 32.144C32.5945 33.0842 32.7581 33.9448 33.0006 34.7065C33.4586 36.145 34.3441 37.5355 35.6664 38.0403C36.644 38.4135 38.0852 38.3436 39.2478 38.3436H40.4517C40.4747 38.3436 40.4945 38.3361 40.5118 38.3209L45.9448 33.5268C45.9738 33.5013 45.9833 33.4624 45.9695 33.4263C45.9557 33.3902 45.9226 33.3677 45.884 33.368L45.1789 33.3734C45.1783 33.3734 45.1777 33.3734 45.1771 33.3734C43.8923 33.4086 42.7021 33.4409 41.8054 32.0462C40.9971 30.7891 41.1358 28.2642 40.6219 26.7357C39.9085 24.6138 38.5418 23.0842 36.5211 22.1025C36.4994 22.0921 36.4772 22.0905 36.4542 22.0976ZM25.627 20.2402C25.627 17.1736 23.7864 14.4796 21.0671 13.3067C21.0307 13.291 21.0093 13.2554 21.0126 13.2159C21.0159 13.1764 21.0428 13.1448 21.0812 13.1353L32.0624 10.4119C32.0719 10.4096 32.0803 10.4088 32.09 10.4094C32.3854 10.4281 32.6617 10.4889 32.9196 10.5859C34.1298 11.0411 34.9685 12.3202 35.5025 13.8513C36.069 15.4754 36.2843 17.3611 36.2386 18.906C36.217 19.636 36.1379 20.2787 36.0112 20.7669C36.0031 20.7981 35.9812 20.8211 35.9504 20.8307L24.574 24.3925C24.537 24.4041 24.4986 24.392 24.475 24.3613C24.4514 24.3306 24.4495 24.2903 24.4701 24.2575C25.203 23.0942 25.627 21.7166 25.627 20.2402ZM16.5432 21.7758C15.6952 20.9278 15.6952 19.5525 16.5432 18.7046C17.9074 17.3404 20.2504 18.3111 20.2504 20.2402C20.2504 22.1693 17.9074 23.14 16.5432 21.7758ZM15.5803 22.7387C14.2003 21.3587 14.2003 19.1217 15.5803 17.7417C16.9602 16.3617 19.1973 16.3617 20.5773 17.7417C21.9573 19.1217 21.9573 21.3588 20.5773 22.7387C19.1973 24.1186 16.9603 24.1186 15.5803 22.7387Z"
                        fill="#767676"
                      />
                    </svg>
                  </span>
                  Материалы
                </a>
              </li>
                <!--товары-->
              <li class="overlay-menu__links-item">
                <a
                href="{% url 'product_list' %}"
                  class="overlay-menu__link overlay-menu__link--warehouse"
                >
                  <span class="overlay-menu__link-icon-wrapper content-size">
                    <svg
                      width="51"
                      height="50"
                      viewBox="0 0 51 50"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M45.1605 4.18288C44.9453 4.01838 44.667 3.95888 44.4045 4.02888L15.75 11.5047V6.62583C15.75 6.32308 15.5925 6.04134 15.3352 5.88209C15.078 5.7211 14.7542 5.7071 14.4847 5.84359L10.9847 7.59356C10.6872 7.7423 10.5 8.04505 10.5 8.37579V12.8732L4.1545 14.5287C3.7695 14.6302 3.5 14.9767 3.5 15.3756V18.8756C3.5 19.1468 3.626 19.4023 3.8395 19.5686C3.99525 19.6876 4.18425 19.7506 4.375 19.7506C4.4485 19.7506 4.522 19.7418 4.5955 19.7226L7 19.0943V45.125C7 45.608 7.392 46 7.875 46H10.5V25.0004H38.5V46H41.125C41.608 46 42 45.608 42 45.125V9.96476L44.8455 9.22277C45.2305 9.12127 45.5 8.77478 45.5 8.37579V4.87586C45.5 4.60462 45.374 4.34912 45.1605 4.18288Z"
                        fill="#767676"
                      />
                      <path
                        d="M19.75 37V38.35C19.75 39.0952 19.19 39.7 18.5 39.7C17.81 39.7 17.25 39.0952 17.25 38.35V37H14.3333C13.8733 37 13.5 37.4032 13.5 37.9V45.1C13.5 45.5968 13.8733 46 14.3333 46H22.6667C23.1267 46 23.5 45.5968 23.5 45.1V37.9C23.5 37.4032 23.1267 37 22.6667 37H19.75Z"
                        fill="#767676"
                      />
                      <path
                        d="M31.75 37V38.35C31.75 39.0952 31.19 39.7 30.5 39.7C29.81 39.7 29.25 39.0952 29.25 38.35V37H26.3333C25.8733 37 25.5 37.4032 25.5 37.9V45.1C25.5 45.5968 25.8733 46 26.3333 46H34.6667C35.1267 46 35.5 45.5968 35.5 45.1V37.9C35.5 37.4032 35.1267 37 34.6667 37H31.75Z"
                        fill="#767676"
                      />
                      <path
                        d="M25.75 27V28.35C25.75 29.0952 25.19 29.7 24.5 29.7C23.81 29.7 23.25 29.0952 23.25 28.35V27H20.3333C19.8733 27 19.5 27.4032 19.5 27.9V35.1C19.5 35.5968 19.8733 36 20.3333 36H28.6667C29.1267 36 29.5 35.5968 29.5 35.1V27.9C29.5 27.4032 29.1267 27 28.6667 27H25.75Z"
                        fill="#767676"
                      />
                    </svg>
                  </span>
                  Продукция
                </a>
              </li>
            {% if perms.warehouse2.view_workorder %}
                <!--доска производства-->
              <li class="overlay-menu__links-item">
                <a
                href="{% url 'workorder_list' %}"
                  class="overlay-menu__link overlay-menu__link--production"
                >
                  <span class="overlay-menu__link-icon-wrapper content-size">
                    <svg
                      width="50"
                      height="50"
                      viewBox="0 0 50 50"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <g clip-path="url(#clip0_291_3246)">
                        <path
                          fill-rule="evenodd"
                          clip-rule="evenodd"
                          d="M40.2996 30.4614H35.7897C35.3861 30.4614 35.0516 30.1384 35.0516 29.7232V26.7589L32.9408 28.8697C32.664 29.158 32.2142 29.158 31.9258 28.8697L28.754 25.7093C28.6386 25.5825 28.5579 25.3864 28.5579 25.2134C28.5579 25.0519 28.6386 24.8558 28.754 24.729L30.8763 22.6182H27.9005C27.4968 22.6182 27.1738 22.2953 27.1738 21.8916V17.3356C27.1738 16.932 27.4968 16.609 27.9005 16.609H30.8763L28.754 14.4983C28.4772 14.2099 28.4772 13.7601 28.754 13.4833L31.972 10.3114C32.2488 10.0231 32.6986 10.0231 32.987 10.3114L35.0977 12.4221V9.4579C35.0977 9.05421 35.4207 8.71973 35.8243 8.71973H40.3342C40.7378 8.71973 41.0723 9.05421 41.0723 9.4579V12.4221L43.1369 10.3114C43.4253 10.0231 43.8751 10.0231 44.1519 10.3114L47.3238 13.4833C47.6121 13.7601 47.6121 14.2099 47.3238 14.4983L45.213 16.609H48.1773C48.581 16.609 48.9039 16.932 48.9039 17.3356V21.8454C48.9039 22.2491 48.581 22.5721 48.1773 22.5721H45.213L47.3238 24.6944C47.4506 24.8097 47.5314 25.0173 47.5314 25.1788C47.5314 25.3403 47.4506 25.5479 47.3238 25.6632L44.1519 28.8351C44.0366 28.9504 43.829 29.0427 43.6675 29.0427C43.4599 29.0427 43.2984 28.9504 43.1831 28.8351L41.0723 26.7243V29.6886C40.9916 30.1384 40.7032 30.4614 40.2996 30.4614ZM38.0619 24.5675C35.2938 24.5675 33.0677 22.3299 33.0677 19.5732C33.0677 16.8051 35.2938 14.6136 38.0619 14.6136C40.8301 14.6136 43.0216 16.8512 43.0216 19.5732C43.0216 22.2953 40.784 24.5675 38.0619 24.5675ZM38.0619 16.0323C36.1127 16.0323 34.4864 17.624 34.4864 19.6078C34.4864 21.5571 36.0666 23.1834 38.0619 23.1834C40.0573 23.1834 41.6375 21.6032 41.6375 19.6078C41.5914 17.624 40.0112 16.0323 38.0619 16.0323Z"
                          fill="#767676"
                        />
                        <path
                          fill-rule="evenodd"
                          clip-rule="evenodd"
                          d="M41.2687 49.9539H37.0473V37.6932C37.0473 37.2895 36.7243 36.955 36.3206 36.955H26.805C26.4014 36.955 26.0784 37.2895 26.0784 37.6932V49.9539H17.0242V37.6932C17.0242 37.2895 16.6897 36.955 16.286 36.955H6.78198C6.37829 36.955 6.05533 37.2895 6.05533 37.6932V49.9539H1.82235C1.41866 49.9539 1.0957 49.6309 1.0957 49.2272V32.7336C1.0957 32.4913 1.21104 32.2491 1.41866 32.1223L11.6147 25.8708C11.7762 25.7439 11.9838 25.7093 12.1453 25.7901C12.3414 25.8247 12.4683 25.9516 12.5951 26.113L15.9169 31.7532L25.5478 25.8708C25.7093 25.7901 25.9169 25.7439 26.0784 25.7901C26.286 25.8247 26.4014 25.9516 26.5282 26.113L30.023 32.0069H41.2687C41.6724 32.0069 42.0069 32.3299 42.0069 32.7336V49.2734C41.9608 49.6309 41.6378 49.9539 41.2687 49.9539ZM35.5824 49.9539H27.5432V38.4198H35.5824V49.9539ZM15.5132 49.9539H7.47402V38.4198H15.5132V49.9539Z"
                          fill="#767676"
                        />
                        <path
                          fill-rule="evenodd"
                          clip-rule="evenodd"
                          d="M1.28027 30.6113L2.83737 13.2757C2.8835 12.9066 3.16032 12.6298 3.52941 12.6298H6.86274C7.23183 12.6298 7.55478 12.9066 7.55478 13.2757L8.73125 26.0323L1.28027 30.6113Z"
                          fill="#767676"
                        />
                        <path
                          fill-rule="evenodd"
                          clip-rule="evenodd"
                          d="M10.7842 24.7751L11.8222 13.2757C11.8568 12.9527 12.1798 12.6644 12.5489 12.6644H15.8822C16.2513 12.6644 16.5743 12.9527 16.5743 13.3103L17.9929 28.8812L16.3897 29.8731L13.7715 25.421C13.4947 24.9481 13.0795 24.6252 12.572 24.4867C12.0068 24.2791 11.407 24.3945 10.8995 24.7059L10.7842 24.7751Z"
                          fill="#767676"
                        />
                        <path
                          fill-rule="evenodd"
                          clip-rule="evenodd"
                          d="M14.3024 11.4879C14.2217 11.4879 14.1755 11.4879 14.0948 11.4418C13.7719 11.361 13.5296 11.0381 13.6104 10.669C13.6104 10.5882 13.9333 8.68512 14.8214 6.77047C14.9829 6.41292 15.4328 6.28604 15.7557 6.44752L17.5896 4.30219C17.4281 3.9331 17.5896 3.52941 17.9587 3.36793C19.0544 2.87197 20.2655 2.99884 21.5227 3.16032C23.8872 3.40254 26.0787 3.69089 28.074 0.357553C28.2701 0.0345999 28.6392 -0.0922744 28.9622 0.0692019C29.2851 0.230678 29.4466 0.599767 29.3313 0.92272C29.2044 1.24567 26.9668 8.07382 22.4224 8.07382C21.9725 8.07382 21.5227 7.99308 21.0844 7.8662C16.9322 6.68973 15.0291 10.8766 14.9483 11.0842C14.8214 11.3264 14.5792 11.4879 14.3024 11.4879Z"
                          fill="#767676"
                        />
                        <path
                          fill-rule="evenodd"
                          clip-rule="evenodd"
                          d="M5.20183 11.8916C5.12109 11.8916 5.07496 11.8916 4.99422 11.857C4.67127 11.7762 4.42905 11.4071 4.50979 11.038C4.54439 10.842 5.36331 5.96307 8.20068 4.04843C9.29641 3.32178 10.519 3.16031 11.9031 3.48326C16.4936 4.70586 18.9273 0.726626 18.9735 0.68049C19.1695 0.357537 19.5386 0.230663 19.8616 0.392139C20.1845 0.553615 20.346 0.922704 20.2307 1.24566C20.1038 1.66088 17.4279 9.78084 11.9838 8.23528C7.84312 7.05881 5.92847 11.2803 5.84774 11.4417C5.72086 11.7301 5.47865 11.8916 5.20183 11.8916Z"
                          fill="#767676"
                        />
                      </g>
                      <defs>
                        <clipPath id="clip0_291_3246">
                          <rect width="50" height="50" fill="white" />
                        </clipPath>
                      </defs>
                    </svg>
                  </span>
                  Производство
                </a>
              </li>
                <!--планирование-->
              <li class="overlay-menu__links-item">
                <a
                href="{% url 'portfolio_list' %}"
                  class="overlay-menu__link overlay-menu__link--production"
                >
                  <span class="overlay-menu__link-icon-wrapper content-size">
                    <svg width="50" height="50" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M27 7.63636C27 7.56818 27 7.56818 27 7.5C27 7.43182 27 7.43182 27 7.36364C26.8645 6.54545 26.1195 5.86364 25.3068 5.86364H21.4462C21.0398 5.86364 20.7689 5.59091 20.7689 5.18182C20.7012 4.02273 19.6853 3 18.4661 3C17.247 3 16.2311 4.02273 16.2311 5.25C16.2311 5.65909 15.8924 5.93182 15.5538 5.93182H11.6932C10.8127 5.93182 10.1355 6.54545 10 7.43182V7.56818V7.70455V9H27V7.63636Z" fill="#767676"/>
                      <path d="M32.3151 9H28V9.89009C28 10.3009 27.726 10.5748 27.3151 10.5748H8.75342C8.34246 10.5748 8.06849 10.2324 8.06849 9.89009V9H3.68493C3.27397 9 3 9.27387 3 9.68468V46.3153C3 46.7261 3.27397 47 3.68493 47H32.3151C32.726 47 33 46.6577 33 46.3153V9.68468C33 9.27387 32.726 9 32.3151 9ZM10.2603 35.7027L7.31507 38.6468C7.17808 38.7838 7.0411 38.8523 6.83562 38.8523C6.63014 38.8523 6.49315 38.7838 6.35616 38.6468L5.12329 37.4144C4.84932 37.1405 4.84932 36.7297 5.12329 36.4559C5.39726 36.182 5.80822 36.182 6.08219 36.4559L6.76712 37.209L9.23288 34.7441C9.50685 34.4703 9.91781 34.4703 10.1918 34.7441C10.5342 35.018 10.5342 35.4288 10.2603 35.7027ZM10.2603 25.9117L7.31507 28.8559C7.17808 28.9928 6.9726 29.0613 6.83562 29.0613C6.63014 29.0613 6.49315 28.9928 6.35616 28.8559L5.12329 27.6234C4.84932 27.3496 4.84932 26.9387 5.12329 26.6649C5.39726 26.391 5.80822 26.391 6.08219 26.6649L6.76712 27.3495L9.23288 24.8847C9.50685 24.6108 9.91781 24.6108 10.1918 24.8847C10.5342 25.227 10.5342 25.6378 10.2603 25.9117ZM10.2603 16.1207L7.31507 19.0649C7.17808 19.2018 6.9726 19.2703 6.83562 19.2703C6.63014 19.2703 6.49315 19.2018 6.35616 19.0649L5.12329 17.8324C4.84932 17.5586 4.84932 17.1477 5.12329 16.8739C5.39726 16.6 5.80822 16.6 6.08219 16.8739L6.76712 17.627L9.23288 15.1622C9.50685 14.8883 9.91781 14.8883 10.1918 15.1622C10.5342 15.436 10.5342 15.8468 10.2603 16.1207ZM29.1644 42.3441H13C12.589 42.3441 12.3151 42.0018 12.3151 41.6595C12.3151 41.3171 12.6575 40.9748 13 40.9748H29.1644C29.5753 40.9748 29.8493 41.3171 29.8493 41.6595C29.8493 42.0018 29.5753 42.3441 29.1644 42.3441ZM29.1644 37.4144H13C12.589 37.4144 12.3151 37.1405 12.3151 36.7297C12.3151 36.3189 12.6575 36.045 13 36.045H29.1644C29.5753 36.045 29.8493 36.3874 29.8493 36.7297C29.8493 37.1405 29.5753 37.4144 29.1644 37.4144ZM29.1644 32.4847H13C12.589 32.4847 12.3151 32.2108 12.3151 31.8C12.3151 31.3892 12.6575 31.1153 13 31.1153H29.1644C29.5753 31.1153 29.8493 31.4577 29.8493 31.8C29.8493 32.2108 29.5753 32.4847 29.1644 32.4847ZM29.1644 27.6234H13C12.589 27.6234 12.3151 27.2811 12.3151 26.9387C12.3151 26.5279 12.6575 26.2541 13 26.2541H29.1644C29.5753 26.2541 29.8493 26.5964 29.8493 26.9387C29.8493 27.2811 29.5753 27.6234 29.1644 27.6234ZM29.1644 22.6937H13C12.589 22.6937 12.3151 22.3514 12.3151 22.009C12.3151 21.5982 12.6575 21.3243 13 21.3243H29.1644C29.5753 21.3243 29.8493 21.6667 29.8493 22.009C29.8493 22.4198 29.5753 22.6937 29.1644 22.6937ZM29.1644 17.8324H13C12.589 17.8324 12.3151 17.5586 12.3151 17.1477C12.3151 16.7369 12.6575 16.4631 13 16.4631H29.1644C29.5753 16.4631 29.8493 16.8054 29.8493 17.1477C29.8493 17.4901 29.5753 17.8324 29.1644 17.8324Z" fill="#767676"/>
                      <path d="M44.0337 19.7136H46.6629C46.8652 19.7136 47 19.5729 47 19.3618V15.3518C47 15.1407 46.8652 15 46.6629 15H44.0337C43.8315 15 43.6966 15.1407 43.6966 15.3518V16.4774H39.6517C39.1798 16.4774 38.8427 16.8291 38.8427 17.3216V28.1558H35V29.8442H38.8427V40.6784C38.8427 41.1709 39.1798 41.5226 39.6517 41.5226H43.6966V42.6482C43.6966 42.8593 43.8315 43 44.0337 43H46.6629C46.8652 43 47 42.8593 47 42.6482V38.6382C47 38.4271 46.8652 38.2864 46.6629 38.2864H44.0337C43.8315 38.2864 43.6966 38.4271 43.6966 38.6382V39.7638H40.5281V29.9146H43.6966V31.0402C43.6966 31.2513 43.8315 31.392 44.0337 31.392H46.6629C46.8652 31.392 47 31.2513 47 31.0402V27.0302C47 26.8191 46.8652 26.6784 46.6629 26.6784H44.0337C43.8315 26.6784 43.6966 26.8191 43.6966 27.0302V28.1558H40.5281V18.1658H43.6966V19.2915C43.6966 19.5025 43.8315 19.7136 44.0337 19.7136Z" fill="#767676"/>
                      </svg>                      
                  </span>
                  Планирование
                </a>
              </li>
            {% endif %}
                <!--отгрузки-->
              <li class="overlay-menu__links-item">
                <a
                  href="{% url 'shipment_list' %}"
                  class="overlay-menu__link overlay-menu__link--shipments"
                >
                  <span class="overlay-menu__link-icon-wrapper content-size">
                    <svg
                      width="51"
                      height="50"
                      viewBox="0 0 51 50"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <g clip-path="url(#clip0_291_3340)">
                        <path
                          fill-rule="evenodd"
                          clip-rule="evenodd"
                          d="M49.0293 41.064V44.4871C49.0293 45.271 48.3901 45.9103 47.6063 45.9103H45.9917C45.5311 43.4162 43.3449 41.527 40.7174 41.527C38.0898 41.527 35.9037 43.4162 35.4432 45.9103H33.1895V22.4927H42.8909C43.8907 22.4927 44.7435 23.0259 45.1051 23.877L48.8687 32.739C48.9801 33.0014 49.0293 33.2418 49.0293 33.523V35.4281H47.3373C46.5714 35.4281 45.9191 35.6853 45.5879 35.9903C45.3071 36.2487 45.1812 36.558 45.1812 36.8683V39.6236C45.1812 39.934 45.3071 40.2433 45.5879 40.5018C45.9191 40.8067 46.5714 41.064 47.3373 41.064H49.0293ZM45.1936 32.8145C45.3132 32.8145 45.4246 32.7546 45.4906 32.6549C45.5566 32.5553 45.5682 32.4291 45.5214 32.3191L42.679 25.6265C42.6232 25.4949 42.494 25.4095 42.3512 25.4095H35.6782C35.5837 25.4095 35.4932 25.4471 35.4264 25.5138C35.3595 25.5806 35.3221 25.6712 35.3221 25.7657V32.4583C35.3221 32.5529 35.3595 32.6434 35.4264 32.7102C35.4932 32.777 35.5837 32.8145 35.6782 32.8145H45.1936ZM49.0293 36.9967V39.4954H47.3373C47.1355 39.4954 46.8858 39.4253 46.7498 39.3817V37.1104C46.8858 37.0668 47.1355 36.9967 47.3373 36.9967H49.0293ZM8.14541 45.9103H3.86815C2.82306 45.9103 1.9707 45.0579 1.9707 44.0129V17.0765C1.9707 16.7047 2.27208 16.4033 2.64384 16.4033H30.5077C30.923 16.4033 31.3079 16.538 31.6209 16.7657V45.9103H18.694C18.2333 43.4162 16.0472 41.527 13.4197 41.527C10.7922 41.527 8.606 43.4162 8.14541 45.9103ZM24.4398 23.7409C24.4398 23.6157 24.3384 23.5143 24.2133 23.5143H22.1611C22.036 23.5143 21.9345 23.6157 21.9345 23.7409V30.5448C21.9345 30.8214 22.1601 31.0469 22.4367 31.0469H28.9649C29.2415 31.0469 29.4671 30.8214 29.4671 30.5448V23.7409C29.4671 23.6808 29.4433 23.6232 29.4007 23.5807C29.3583 23.5382 29.3006 23.5143 29.2405 23.5143H27.1884C27.0633 23.5143 26.9619 23.6157 26.9619 23.7409V26.361C26.9619 26.4211 26.9381 26.4786 26.8955 26.5212C26.8531 26.5636 26.7954 26.5876 26.7353 26.5876H24.6664C24.6063 26.5876 24.5486 26.5636 24.5062 26.5212C24.4636 26.4786 24.4398 26.4211 24.4398 26.361V23.7409ZM15.9269 23.7409C15.9269 23.6157 15.8254 23.5143 15.7003 23.5143H13.6482C13.5231 23.5143 13.4216 23.6157 13.4216 23.7409V30.5448C13.4216 30.8214 13.6472 31.0469 13.9237 31.0469H20.452C20.7285 31.0469 20.9541 30.8214 20.9541 30.5448V23.7409C20.9541 23.6808 20.9303 23.6232 20.8878 23.5807C20.8453 23.5382 20.7877 23.5143 20.7276 23.5143H18.6755C18.5504 23.5143 18.4489 23.6157 18.4489 23.7409V26.361C18.4489 26.4211 18.425 26.4786 18.3826 26.5212C18.3401 26.5636 18.2825 26.5876 18.2224 26.5876H16.1534C16.0933 26.5876 16.0357 26.5636 15.9933 26.5212C15.9507 26.4786 15.9269 26.4211 15.9269 26.361V23.7409ZM7.41394 23.7409C7.41394 23.6157 7.31247 23.5143 7.18737 23.5143H5.13521C5.01011 23.5143 4.90864 23.6157 4.90864 23.7409V30.5448C4.90864 30.8214 5.13423 31.0469 5.4108 31.0469H11.939C12.2156 31.0469 12.4412 30.8214 12.4412 30.5448V23.7409C12.4412 23.6808 12.4174 23.6232 12.3748 23.5807C12.3324 23.5382 12.2747 23.5143 12.2146 23.5143H10.1626C10.0375 23.5143 9.936 23.6157 9.936 23.7409V26.361C9.936 26.4211 9.91208 26.4786 9.86962 26.5212C9.82717 26.5636 9.76953 26.5876 9.70943 26.5876H7.64051C7.58041 26.5876 7.52276 26.5636 7.48031 26.5212C7.43776 26.4786 7.41394 26.4211 7.41394 26.361V23.7409ZM15.9269 32.2538C15.9269 32.1286 15.8254 32.0273 15.7003 32.0273H13.6482C13.5231 32.0273 13.4216 32.1286 13.4216 32.2538V39.0578C13.4216 39.3343 13.6472 39.5598 13.9237 39.5598H20.452C20.7285 39.5598 20.9541 39.3343 20.9541 39.0578V32.2538C20.9541 32.1937 20.9303 32.1361 20.8878 32.0936C20.8453 32.0511 20.7877 32.0273 20.7276 32.0273H18.6755C18.5504 32.0273 18.4489 32.1286 18.4489 32.2538V34.8739C18.4489 34.934 18.425 34.9916 18.3826 35.0341C18.3401 35.0766 18.2825 35.1005 18.2224 35.1005H16.1534C16.0933 35.1005 16.0357 35.0766 15.9933 35.0341C15.9507 34.9916 15.9269 34.934 15.9269 34.8739V32.2538ZM24.4398 32.2538C24.4398 32.1286 24.3384 32.0273 24.2133 32.0273H22.1611C22.036 32.0273 21.9345 32.1286 21.9345 32.2538V39.0578C21.9345 39.3343 22.1601 39.5598 22.4367 39.5598H28.9649C29.2415 39.5598 29.4671 39.3343 29.4671 39.0578V32.2538C29.4671 32.1937 29.4433 32.1361 29.4007 32.0936C29.3583 32.0511 29.3006 32.0273 29.2405 32.0273H27.1884C27.0633 32.0273 26.9619 32.1286 26.9619 32.2538V34.8739C26.9619 34.934 26.9381 34.9916 26.8955 35.0341C26.8531 35.0766 26.7954 35.1005 26.7353 35.1005H24.6664C24.6063 35.1005 24.5486 35.0766 24.5062 35.0341C24.4636 34.9916 24.4398 34.934 24.4398 34.8739V32.2538ZM7.41394 32.2538C7.41394 32.1286 7.31247 32.0273 7.18737 32.0273H5.13521C5.01011 32.0273 4.90864 32.1286 4.90864 32.2538V39.0578C4.90864 39.3343 5.13423 39.5598 5.4108 39.5598H11.939C12.2156 39.5598 12.4412 39.3343 12.4412 39.0578V32.2538C12.4412 32.1937 12.4174 32.1361 12.3748 32.0936C12.3324 32.0511 12.2747 32.0273 12.2146 32.0273H10.1626C10.0375 32.0273 9.936 32.1286 9.936 32.2538V34.8739C9.936 34.934 9.91208 34.9916 9.86962 35.0341C9.82717 35.0766 9.76953 35.1005 9.70943 35.1005H7.64051C7.58041 35.1005 7.52276 35.0766 7.48031 35.0341C7.43776 34.9916 7.41394 34.934 7.41394 34.8739V32.2538ZM40.7174 43.0956C42.8134 43.0956 44.5125 44.7947 44.5125 46.8907C44.5125 48.9867 42.8134 50.6857 40.7174 50.6857C38.6214 50.6857 36.9224 48.9867 36.9224 46.8907C36.9224 44.7947 38.6214 43.0956 40.7174 43.0956ZM40.7174 45.5977C40.0028 45.5977 39.4243 46.1761 39.4243 46.8907C39.4243 47.6053 40.0028 48.1836 40.7174 48.1836C41.432 48.1836 42.0103 47.6053 42.0103 46.8907C42.0103 46.176 41.432 45.5977 40.7174 45.5977ZM13.4197 43.0956C15.5157 43.0956 17.2148 44.7947 17.2148 46.8907C17.2148 48.9867 15.5157 50.6857 13.4197 50.6857C11.3236 50.6857 9.62462 48.9867 9.62462 46.8907C9.62462 44.7947 11.3236 43.0956 13.4197 43.0956ZM13.4197 45.5977C12.705 45.5977 12.1268 46.1761 12.1268 46.8907C12.1268 47.6053 12.705 48.1836 13.4197 48.1836C14.1343 48.1836 14.7127 47.6053 14.7127 46.8907C14.7127 46.176 14.1343 45.5977 13.4197 45.5977ZM7.76119 13.5585C7.70855 13.6196 7.63904 13.6519 7.55923 13.6519C7.47776 13.6519 7.40992 13.6196 7.35727 13.5585L3.70698 9.25992C3.63904 9.17845 3.62374 9.07325 3.66786 8.97648C3.71208 8.88148 3.80364 8.82207 3.90884 8.82207H5.60933V3.17599C5.60933 2.88403 5.84688 2.64648 6.13884 2.64648H8.97962C9.27159 2.64648 9.50913 2.88403 9.50913 3.17599V8.82207H11.2096C11.3148 8.82207 11.4065 8.88148 11.4506 8.97648C11.4947 9.07325 11.4794 9.17845 11.4115 9.25992L7.76119 13.5585ZM17.3898 13.5585C17.3372 13.6196 17.2677 13.6519 17.1879 13.6519C17.1064 13.6519 17.0385 13.6196 16.9859 13.5585L13.3356 9.25992C13.2677 9.17845 13.2525 9.07325 13.2966 8.97648C13.3407 8.88148 13.4323 8.82207 13.5376 8.82207H15.238V3.17599C15.238 2.88403 15.4756 2.64648 15.7675 2.64648H18.6084C18.9002 2.64648 19.1378 2.88403 19.1378 3.17599V8.82207H20.8383C20.9434 8.82207 21.0351 8.88148 21.0792 8.97648C21.1234 9.07325 21.1081 9.17845 21.0402 9.25992L17.3898 13.5585ZM27.0184 13.5585C26.9659 13.6196 26.8963 13.6519 26.8165 13.6519C26.735 13.6519 26.6672 13.6196 26.6145 13.5585L22.9642 9.25992C22.8964 9.17845 22.8811 9.07325 22.9252 8.97648C22.9693 8.88148 23.061 8.82207 23.1662 8.82207H24.8666V3.17599C24.8666 2.88403 25.1042 2.64648 25.3961 2.64648H28.237C28.5288 2.64648 28.7664 2.88403 28.7664 3.17599V8.82207H30.4669C30.5721 8.82207 30.6637 8.88148 30.7079 8.97648C30.752 9.07325 30.7367 9.17845 30.6688 9.25992L27.0184 13.5585Z"
                          fill="#767676"
                        />
                      </g>
                      <defs>
                        <clipPath id="clip0_291_3340">
                          <rect
                            width="50"
                            height="50"
                            fill="white"
                            transform="translate(0.5)"
                          />
                        </clipPath>
                      </defs>
                    </svg>
                  </span>
                  Отгрузки
                </a>
              </li>
            <!--переучет-->
              <li class="overlay-menu__links-item">
                <a
                  href="{% url 'count_list' %}"
                  class="overlay-menu__link overlay-menu__link--inventory"
                >
                  <span class="overlay-menu__link-icon-wrapper content-size">
                    <svg
                      width="51"
                      height="50"
                      viewBox="0 0 51 50"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M4.96847 30.0335C5.11408 30.4071 4.95372 30.8303 4.59689 31.0134L3.72697 31.4648L8.24025 33.8976L8.9007 28.7539L7.83908 29.3105C7.63722 29.4164 7.39914 29.4289 7.18722 29.3448C6.9754 29.2607 6.81085 29.0883 6.73654 28.8727L6.53722 28.2941C5.41046 25.042 5.3591 21.5809 6.38898 18.2862C7.66349 14.2055 10.452 10.8639 14.2408 8.87732C14.4872 8.74802 14.669 8.53025 14.7522 8.26462C14.8353 7.99939 14.81 7.71804 14.681 7.47253C14.4145 6.96452 13.7834 6.76716 13.2742 7.03279C8.99269 9.27751 5.84142 13.0536 4.40216 17.6646C3.16662 21.6174 3.30324 25.7426 4.79718 29.5948L4.96847 30.0335Z"
                        fill="#767676"
                      />
                      <path
                        d="M16.8945 28.2513H19.0316V30.3855H16.8945V28.2513Z"
                        fill="#767676"
                      />
                      <path
                        d="M16.8945 34.8175H19.0316V36.9546H16.8945V34.8175Z"
                        fill="#767676"
                      />
                      <path
                        d="M16.8945 41.3864H19.0316V43.5234H16.8945V41.3864Z"
                        fill="#767676"
                      />
                      <path
                        d="M32.2753 22.272V17.9792C31.7987 17.933 31.3335 17.8476 30.8826 17.7266H16.7871V22.272H32.2753Z"
                        fill="#767676"
                      />
                      <path
                        d="M40.1594 9.40946C40.1594 5.52401 36.9983 2.36298 33.1129 2.36298C29.2274 2.36298 26.0664 5.52401 26.0664 9.40946C26.0664 13.2949 29.2274 16.4559 33.1129 16.4559C36.9983 16.4559 40.1594 13.2949 40.1594 9.40946ZM33.1129 8.62743C35.1518 8.62743 36.7488 9.83417 36.7488 11.3749C36.7488 12.712 35.5455 13.7971 33.8948 14.0605V14.2925C33.8948 14.7244 33.5447 15.0745 33.1128 15.0745C32.6809 15.0745 32.3308 14.7244 32.3308 14.2925V14.0605C30.68 13.7971 29.4767 12.7119 29.4767 11.3748C29.4767 10.9429 29.8268 10.5928 30.2587 10.5928C30.6906 10.5928 31.0407 10.9429 31.0407 11.3748C31.0407 11.9074 31.8121 12.4968 32.9389 12.5527H33.2867C34.4134 12.4968 35.1848 11.9075 35.1848 11.3748C35.1848 10.8151 34.3338 10.1914 33.1128 10.1914C31.0738 10.1914 29.4768 8.98466 29.4768 7.44393C29.4768 6.10682 30.6801 5.02176 32.3309 4.75819V4.52626C32.3309 4.09432 32.681 3.74423 33.1129 3.74423C33.5448 3.74423 33.8949 4.09432 33.8949 4.52626V4.75819C35.5456 5.02167 36.7489 6.10682 36.7489 7.44384C36.7489 7.87577 36.3988 8.22587 35.9669 8.22587C35.535 8.22587 35.1849 7.87577 35.1849 7.44384C35.1849 6.88417 34.3339 6.26044 33.1129 6.26044C31.8919 6.26044 31.0408 6.88417 31.0408 7.44384C31.0408 8.0035 31.8918 8.62723 33.1129 8.62723V8.62743Z"
                        fill="#767676"
                      />
                      <path
                        d="M46.0312 20.0051C45.8862 19.633 46.0448 19.2114 46.3991 19.0272L47.2727 18.571L42.7594 16.1382L42.0989 21.282L43.1606 20.7253C43.3627 20.6194 43.6007 20.607 43.8126 20.6911C44.0244 20.7753 44.189 20.9478 44.2632 21.1633L44.4624 21.7419C45.5911 24.9934 45.6435 28.4546 44.6135 31.7497C43.4613 35.4325 41.0423 38.55 37.7783 40.5752V42.9743C42.0331 40.7257 45.1652 36.9626 46.6002 32.3709C47.8335 28.4171 47.696 24.2927 46.2023 20.444L46.0312 20.005V20.0051Z"
                        fill="#767676"
                      />
                      <path
                        d="M33.8389 23.054C33.8389 23.486 33.4888 23.8361 33.0568 23.8361H16.0047C15.5728 23.8361 15.2227 23.486 15.2227 23.054V16.9446C15.2227 16.5126 15.5728 16.1625 16.0047 16.1625H27.7764C27.0487 15.5864 26.4163 14.8951 25.9062 14.1168H14.1528C13.4332 14.1168 12.8477 14.7011 12.8477 15.4193V46.3346C12.8477 47.0528 13.4332 47.637 14.1528 47.637H34.9116C35.6298 47.637 36.2141 47.0528 36.2141 46.3346V17.4418C35.4668 17.7314 34.6695 17.9194 33.839 17.9891V23.054H33.8389ZM20.5958 44.3055C20.5958 44.7374 20.2457 45.0875 19.8138 45.0875H16.1127C15.6808 45.0875 15.3307 44.7374 15.3307 44.3055V40.6045C15.3307 40.1726 15.6808 39.8225 16.1127 39.8225H19.8138C20.2457 39.8225 20.5958 40.1726 20.5958 40.6045V44.3055ZM20.5958 37.7365C20.5958 38.1685 20.2457 38.5186 19.8138 38.5186H16.1127C15.6808 38.5186 15.3307 38.1685 15.3307 37.7365V34.0355C15.3307 33.6035 15.6808 33.2534 16.1127 33.2534H19.8138C20.2457 33.2534 20.5958 33.6035 20.5958 34.0355V37.7365ZM20.5958 31.1676C20.5958 31.5995 20.2457 31.9496 19.8138 31.9496H16.1127C15.6808 31.9496 15.3307 31.5995 15.3307 31.1676V27.4694C15.3307 27.0374 15.6808 26.6873 16.1127 26.6873H19.8138C20.2457 26.6873 20.5958 27.0374 20.5958 27.4694V31.1676ZM27.1647 44.3055C27.1647 44.7374 26.8146 45.0875 26.3827 45.0875H22.6816C22.2497 45.0875 21.8996 44.7374 21.8996 44.3055V40.6045C21.8996 40.1726 22.2497 39.8225 22.6816 39.8225H26.3827C26.8146 39.8225 27.1647 40.1726 27.1647 40.6045V44.3055ZM27.1647 37.7365C27.1647 38.1685 26.8146 38.5186 26.3827 38.5186H22.6816C22.2497 38.5186 21.8996 38.1685 21.8996 37.7365V34.0355C21.8996 33.6035 22.2497 33.2534 22.6816 33.2534H26.3827C26.8146 33.2534 27.1647 33.6035 27.1647 34.0355V37.7365ZM27.1647 31.1676C27.1647 31.5995 26.8146 31.9496 26.3827 31.9496H22.6816C22.2497 31.9496 21.8996 31.5995 21.8996 31.1676V27.4694C21.8996 27.0374 22.2497 26.6873 22.6816 26.6873H26.3827C26.8146 26.6873 27.1647 27.0374 27.1647 27.4694V31.1676ZM33.731 44.3055C33.731 44.7374 33.3809 45.0875 32.9489 45.0875H29.2506C28.8187 45.0875 28.4686 44.7374 28.4686 44.3055V40.6045C28.4686 40.1726 28.8187 39.8225 29.2506 39.8225H32.9489C33.3809 39.8225 33.731 40.1726 33.731 40.6045V44.3055ZM33.731 37.7365C33.731 38.1685 33.3809 38.5186 32.9489 38.5186H29.2506C28.8187 38.5186 28.4686 38.1685 28.4686 37.7365V34.0355C28.4686 33.6035 28.8187 33.2534 29.2506 33.2534H32.9489C33.3809 33.2534 33.731 33.6035 33.731 34.0355V37.7365ZM33.731 31.1676C33.731 31.5995 33.3809 31.9496 32.9489 31.9496H29.2506C28.8187 31.9496 28.4686 31.5995 28.4686 31.1676V27.4694C28.4686 27.0374 28.8187 26.6873 29.2506 26.6873H32.9489C33.3809 26.6873 33.731 27.0374 33.731 27.4694V31.1676Z"
                        fill="#767676"
                      />
                      <path
                        d="M30.0332 34.8175H32.1675V36.9546H30.0332V34.8175Z"
                        fill="#767676"
                      />
                      <path
                        d="M23.4639 34.8175H25.601V36.9546H23.4639V34.8175Z"
                        fill="#767676"
                      />
                      <path
                        d="M23.4639 28.2513H25.601V30.3855H23.4639V28.2513Z"
                        fill="#767676"
                      />
                      <path
                        d="M23.4639 41.3864H25.601V43.5234H23.4639V41.3864Z"
                        fill="#767676"
                      />
                      <path
                        d="M30.0332 41.3864H32.1675V43.5234H30.0332V41.3864Z"
                        fill="#767676"
                      />
                      <path
                        d="M30.0332 28.2513H32.1675V30.3855H30.0332V28.2513Z"
                        fill="#767676"
                      />
                    </svg>
                  </span>
                  Переучёт
                </a>
              </li>
            <!--отчеты-->
              <li class="overlay-menu__links-item">
                <a href="{% url 'reports_home' %}" class="overlay-menu__link overlay-menu__link--data">
                  <span class="overlay-menu__link-icon-wrapper content-size">
                    <svg
                      width="51"
                      height="50"
                      viewBox="0 0 51 50"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M37.9375 35.0853C37.9375 38.6498 38.7492 42.2185 40.2847 45.4056C40.6561 46.1972 41.7807 46.1991 42.1527 45.4056C43.6883 42.2185 44.5 38.6498 44.5 35.0853V21.625H37.9375V35.0853Z"
                        fill="#767676"
                      />
                      <path
                        d="M44.5 11.8472C44.3315 7.3651 38.0879 7.40348 37.9375 11.8472V18.8125H44.5V11.8472Z"
                        fill="#767676"
                      />
                      <path
                        d="M23.2945 29.5303V25.375C21.4703 25.8715 20.125 27.5463 20.125 29.5303C20.2376 34.5662 27.1756 35.4368 28.5625 30.6573H24.4183C23.7977 30.6573 23.2945 30.1527 23.2945 29.5303Z"
                        fill="#767676"
                      />
                      <path
                        d="M23.4975 16.6592V8.5H10.4569C8.54786 8.5 7 10.0423 7 11.9521V42.5478C7 44.4543 8.54448 46 10.4569 46H31.6681C33.5771 46 35.125 44.4577 35.125 42.5479V20.1113H26.9545C25.0483 20.1113 23.4975 18.5627 23.4975 16.6592ZM12.8138 13.2071H19.8842C21.34 13.26 21.3433 15.35 19.8842 15.4043H12.8138C12.2062 15.4043 11.7136 14.9124 11.7136 14.3057C11.7136 13.6989 12.2061 13.2071 12.8138 13.2071ZM12.8138 17.914H17.5274C18.9839 17.9673 18.9859 20.0573 17.5274 20.1113H12.8138C12.2063 20.1113 11.7137 19.6194 11.7137 19.0127C11.7137 18.4059 12.2061 17.914 12.8138 17.914ZM12.8138 23.7979H15.1705C16.6277 23.8514 16.6285 25.9413 15.1705 25.9951H12.8138C11.3566 25.9415 11.3558 23.8517 12.8138 23.7979ZM12.8138 28.5049H15.1705C16.6277 28.5584 16.6285 30.6483 15.1705 30.7021H12.8138C11.3566 30.6486 11.3558 28.5588 12.8138 28.5049ZM12.8138 33.2119H15.1705C16.6277 33.2655 16.6285 35.3553 15.1705 35.4092H12.8138C11.3566 35.3556 11.3558 33.2657 12.8138 33.2119ZM29.3113 41.2929H12.8137C12.2061 41.2929 11.7135 40.801 11.7135 40.1943C11.7135 39.5876 12.2061 39.0957 12.8137 39.0957H29.3113C30.7644 39.1474 30.7731 41.2377 29.3113 41.2929ZM31.0006 29.6035C31.0006 33.1292 28.1283 35.9975 24.5977 35.9975C16.115 35.6761 16.1173 23.5297 24.5978 23.2094C28.1283 23.2094 31.0006 26.0778 31.0006 29.6035Z"
                        fill="#767676"
                      />
                      <path
                        d="M25.75 25.375V28.1875H28.5625C28.192 26.8226 27.115 25.7455 25.75 25.375Z"
                        fill="#767676"
                      />
                      <path
                        d="M26.9573 17.875H34.1875L25.75 9.4375V16.6678C25.75 17.3334 26.2916 17.875 26.9573 17.875Z"
                        fill="#767676"
                      />
                    </svg>
                  </span>
                  Отчёты
                </a>
              </li>
            <!--чат-->
              <li class="overlay-menu__links-item">
                <a href="{% url 'dialogs' %}" class="overlay-menu__link overlay-menu__link--chat">
                  <span class="overlay-menu__link-icon-wrapper content-size">
                    <!-- этот ниже - бадж, его можно удалить програмно или програмно добавить ему класс visually-hidden: -->
                    {% if unread_messages_count > 0 %}
                    <span class="overlay-menu__icon-badge">{{ unread_messages_count }}</span>
                    {% endif %}
                    <svg
                      width="50"
                      height="50"
                      viewBox="0 0 50 50"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M9.66613 8C5.99007 8 3 11.0145 3 14.725V32.6721C3 36.3816 5.99016 39.4009 9.66613 39.4009H33.6837C34.7006 39.4009 35.6193 39.7832 36.3397 40.5071L41.5593 45.7463C42.0969 46.2863 43 45.9079 43 45.1423V14.725C43 11.0145 40.0088 8 36.3333 8H9.66613ZM31.2738 22.9545C31.2738 21.1394 32.7379 19.6616 34.5377 19.6616C36.3375 19.6616 37.8015 21.1393 37.8015 22.9545C37.8015 24.7702 36.3375 26.249 34.5377 26.249C32.7379 26.249 31.2738 24.7702 31.2738 22.9545ZM23 19.6617C24.7987 19.6617 26.2638 21.1394 26.2638 22.9545C26.2638 24.7701 24.7987 26.249 23 26.249C21.2001 26.249 19.7361 24.7702 19.7361 22.9545C19.7361 21.1394 21.2001 19.6617 23 19.6617ZM11.4622 19.6617C13.261 19.6617 14.7261 21.1394 14.7261 22.9546C14.7261 24.7703 13.2609 26.2491 11.4622 26.2491C9.66239 26.2491 8.19786 24.7703 8.19786 22.9546C8.19786 21.1394 9.66239 19.6617 11.4622 19.6617Z"
                        fill="#767676"
                      />
                    </svg>
                  </span>
                  Чат
                </a>
              </li>
            </ul>
          </div>
        </details>
      </nav>
      <!-- уведомления: -->
      {% if messages %}
        {% for message in messages %}
            {% if message.level_tag == 'success' %}
      <div class="header-notification header-notification--successfully">
        <div class="header-notification__body container">
          <p class="header-notification__text flex-center">
            {{ message }}
            <span class="header-notification__icon-wrapper content-size">
              <svg
                width="25"
                height="25"
                viewBox="0 0 25 25"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M7.48e-10 12.4683C0.688245 -4.15578 24.3112 -4.15622 25 12.4677C25.0011 14.8042 24.3505 17.095 23.1215 19.0802C21.8925 21.0652 20.1342 22.6659 18.0455 23.7017C15.9567 24.7375 13.6207 25.167 11.3013 24.9415C8.98183 24.7159 6.77135 23.8444 4.91999 22.4254C3.65226 22.3661 2.38134 22.4296 1.12587 22.6156C0.99872 22.633 0.869229 22.6159 0.751265 22.5653C0.633225 22.5146 0.530895 22.4326 0.455708 22.3282C0.380569 22.2239 0.335326 22.1008 0.324425 21.9726C0.313545 21.8444 0.337382 21.7153 0.393847 21.5998C0.893374 20.6262 1.28807 19.6017 1.56989 18.544C0.540488 16.6853 -2.32184e-05 14.5944 7.48e-10 12.4683ZM19.5178 7.3706C19.9637 6.952 19.5548 6.19139 18.9974 6.38165C16.545 7.21887 13.3865 9.42559 10.4881 13.1927L8.77873 11.252C8.51859 10.9476 8.03531 10.9476 7.77521 11.252L6.51188 12.6978C6.25178 12.9642 6.28892 13.4212 6.54899 13.6496L10.4139 17.4544C10.7483 17.7588 11.2687 17.6833 11.4917 17.3028C13.5726 13.4595 15.7646 10.6431 19.5178 7.3706Z"
                  fill="white"
                />
              </svg>
            </span>
          </p>
        </div>
      </div>
      {% elif message.level_tag == 'error' or message.level_tag == 'danger' %}
      <div class="header-notification header-notification--unsuccessfully">
        <div class="header-notification__body container">
          <p class="header-notification__text flex-center">
            {{ message }}
            <span class="header-notification__icon-wrapper content-size">
              <svg
                width="26"
                height="25"
                viewBox="0 0 26 25"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M0.5 12.4684C1.18822 -4.15579 24.8112 -4.15622 25.5 12.4677C25.5011 14.8042 24.8505 17.095 23.6215 19.0802C22.3925 21.0652 20.6342 22.666 18.5455 23.7017C16.4567 24.7375 14.1207 25.167 11.8013 24.9415C9.48186 24.7159 7.27134 23.8443 5.41999 22.4254C4.15226 22.3661 2.88134 22.4296 1.62587 22.6156C1.49874 22.633 1.36921 22.6159 1.25126 22.5653C1.13325 22.5146 1.03089 22.4325 0.955708 22.3282C0.880587 22.2239 0.835347 22.1008 0.824425 21.9726C0.813542 21.8444 0.837417 21.7153 0.893847 21.5998C1.39336 20.6263 1.78807 19.6017 2.06989 18.544C1.0405 16.6854 0.500001 14.5943 0.5 12.4684ZM10.5414 7.26656C10.3078 6.98709 9.88682 6.98709 9.60659 7.26656L7.69166 9.40917C7.45825 9.64207 7.50492 10.015 7.7384 10.2479L10.3544 12.7633L8.11231 14.999C7.87879 15.2319 7.87884 15.6509 8.15905 15.8839L9.74681 17.2346C9.98026 17.4674 10.3539 17.4211 10.5874 17.1884L12.7361 14.999L15.3053 17.4675C15.5389 17.7005 15.9124 17.7005 16.146 17.4675L17.5935 16.1168C17.827 15.8839 17.8738 15.5117 17.6402 15.2788L15.2119 12.4835L17.9207 9.68897C18.1542 9.45606 18.1542 9.08316 17.9207 8.85026L16.5199 7.4995C16.2863 7.26659 15.8654 7.22002 15.6318 7.4995L13.0165 10.108L10.5414 7.26656Z"
                  fill="white"
                />
              </svg>
            </span>
          </p>
        </div>
      </div>
      {% else %}
      <div class="header-notification header-notification--successfully">
        <div class="header-notification__body container">
          <p class="header-notification__text flex-center">
            {{ message }}
            <span class="header-notification__icon-wrapper content-size">
              <svg
                width="25"
                height="25"
                viewBox="0 0 25 25"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M7.48e-10 12.4683C0.688245 -4.15578 24.3112 -4.15622 25 12.4677C25.0011 14.8042 24.3505 17.095 23.1215 19.0802C21.8925 21.0652 20.1342 22.6659 18.0455 23.7017C15.9567 24.7375 13.6207 25.167 11.3013 24.9415C8.98183 24.7159 6.77135 23.8444 4.91999 22.4254C3.65226 22.3661 2.38134 22.4296 1.12587 22.6156C0.99872 22.633 0.869229 22.6159 0.751265 22.5653C0.633225 22.5146 0.530895 22.4326 0.455708 22.3282C0.380569 22.2239 0.335326 22.1008 0.324425 21.9726C0.313545 21.8444 0.337382 21.7153 0.393847 21.5998C0.893374 20.6262 1.28807 19.6017 1.56989 18.544C0.540488 16.6853 -2.32184e-05 14.5944 7.48e-10 12.4683ZM19.5178 7.3706C19.9637 6.952 19.5548 6.19139 18.9974 6.38165C16.545 7.21887 13.3865 9.42559 10.4881 13.1927L8.77873 11.252C8.51859 10.9476 8.03531 10.9476 7.77521 11.252L6.51188 12.6978C6.25178 12.9642 6.28892 13.4212 6.54899 13.6496L10.4139 17.4544C10.7483 17.7588 11.2687 17.6833 11.4917 17.3028C13.5726 13.4595 15.7646 10.6431 19.5178 7.3706Z"
                  fill="white"
                />
              </svg>
            </span>
          </p>
        </div>
    </div>
    {% endif %}
    {% endfor %}
    {% endif %}
</header>
{% block content %}
{% endblock %}
<audio id="global-notify-sound" preload="auto">
    <source src="{% static 'sounds/notify.mp3' %}" type="audio/mpeg">
</audio>
<script>
    document.addEventListener("DOMContentLoaded", () => {
    /* --- 1. Логика Хедера --- */
    const header = document.querySelector(".header");
    let lastScrollY = window.scrollY;

    const updateHeader = () => {
        const currentScrollY = window.scrollY;
        // Скрываем, только если проскроллили больше 100px и двигаемся вниз
        if (Math.abs(currentScrollY - lastScrollY) > 10) {
        header.classList.toggle(
            "header--hidden",
            currentScrollY > lastScrollY && currentScrollY > 100,
        );
        lastScrollY = currentScrollY;
        }
    };

    // Throttle через requestAnimationFrame не обязателен для простого add/remove class,
    // но можно оставить пассивный слушатель для производительности
    window.addEventListener("scroll", updateHeader, { passive: true });

    /* --- 2. Класс CustomDropdown --- */
    class CustomDropdown {
        constructor(element) {
        this.el = element;
        this.trigger = element.querySelector("[data-dropdown-trigger]");
        this.list = element.querySelector("[data-dropdown-list]");
        this.valueSpan = element.querySelector("[data-dropdown-value]");
        this.input = element.querySelector(".dropdown-hidden-input");

        this.initEvents();
        }

        initEvents() {
        // Клик по кнопке открытия
        this.trigger.addEventListener("click", (e) => {
            e.stopPropagation(); // Чтобы не сработал клик по документу
            this.toggle();
        });

        // Делегирование: клик по элементам списка
        this.list.addEventListener("click", (e) => {
            const item = e.target.closest(".select-item");
            if (item) {
            e.stopPropagation();
            this.select(
                item.dataset.value || item.textContent.trim(),
                item.textContent.trim(),
            );
            this.close();
            }
        });
        }

        toggle() {
        const isOpen = this.list.getAttribute("aria-expanded") === "true";
        isOpen ? this.close() : this.open();
        }

        open() {
        // Закрываем все остальные открытые дропдауны
        document
            .querySelectorAll('[data-dropdown] [aria-expanded="true"]')
            .forEach((list) => {
            if (list !== this.list) {
                list.setAttribute("aria-expanded", "false");
                list
                .closest("[data-dropdown]")
                .querySelector("[data-dropdown-trigger]")
                .setAttribute("aria-expanded", "false");
            }
            });

        this.list.setAttribute("aria-expanded", "true");
        this.trigger.setAttribute("aria-expanded", "true");
        }

        close() {
        this.list.setAttribute("aria-expanded", "false");
        this.trigger.setAttribute("aria-expanded", "false");
        }

        select(value, text) {
        this.valueSpan.textContent = text;
        if (this.input) {
            this.input.value = value;
            this.input.dispatchEvent(new Event("change", { bubbles: true }));
        }
        }
    }

    // Инициализация
    document
        .querySelectorAll("[data-dropdown]")
        .forEach((el) => new CustomDropdown(el));

    /* --- 3. Глобальные обработчики (Клик вне элементов) --- */
    document.addEventListener("click", (e) => {
        // Закрытие дропдаунов
        if (!e.target.closest("[data-dropdown]")) {
        document
            .querySelectorAll('[data-dropdown] [aria-expanded="true"]')
            .forEach((list) => {
            // Находим экземпляр или просто меняем атрибуты (проще менять атрибуты напрямую)
            list.setAttribute("aria-expanded", "false");
            list
                .closest("[data-dropdown]")
                .querySelector("[data-dropdown-trigger]")
                .setAttribute("aria-expanded", "false");
            });
        }

        // Закрытие аккордеонов
        const openAccordion = document.querySelector(
        ".closing-accordion[open]",
        );
        if (openAccordion && !e.target.closest(".closing-accordion")) {
        e.preventDefault();
        openAccordion.removeAttribute("open");
        }
    });

    // Закрытие по ESC
    document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") {
        document
            .querySelectorAll('[aria-expanded="true"]')
            .forEach((el) => el.setAttribute("aria-expanded", "false"));
        }
    });

    /* --- 4. Аккордеоны (эксклюзивное открытие) --- */
    document.querySelectorAll(".closing-accordion").forEach((accordion) => {
        accordion.addEventListener("toggle", function () {
        if (this.hasAttribute("open")) {
            document
            .querySelectorAll(".closing-accordion[open]")
            .forEach((other) => {
                if (other !== this) other.removeAttribute("open");
            });
        }
        });
    });
    });
</script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Переменная из Django
        const currentUnreadCount = parseInt("{{ unread_messages_count|default:0 }}");
        const lastCount = parseInt(sessionStorage.getItem('global_unread_count') || 0);

        if (currentUnreadCount > lastCount) {
            const sound = document.getElementById('global-notify-sound');
            if (sound) {
                // Небольшая задержка, чтобы страница успела "прогрузиться"
                setTimeout(() => {
                    sound.play().catch(e => {
                        console.log("Автовоспроизведение заблокировано. Нужен клик.");
                    });
                }, 500);
            }
        }
        // Сохраняем состояние
        sessionStorage.setItem('global_unread_count', currentUnreadCount);
    });
</script>
<script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function() {
        console.log("Global scanner script initialized");
        
        const globalScanButton = document.getElementById('global-scan-btn');
        const globalSearchInput = document.querySelector('#filter-form input[name="q"]');
        const videoElement = document.getElementById('video-stream');
        const filterForm = document.getElementById('filter-form');
        
        if (!globalScanButton || !globalSearchInput || !videoElement || !filterForm) {
            console.error("Required elements for global scanner not found");
            return;
        }
        
        // Проверка наличия библиотеки ZXing
        if (typeof ZXing === 'undefined') {
            console.error("ZXing library not loaded");
            globalScanButton.disabled = true;
            globalScanButton.title = "Библиотека сканера не загружена";
            return;
        }
        
        const codeReader = new ZXing.BrowserMultiFormatReader();
        const isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);
        const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
        const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);

        if (isIOS || isSafari) {
            console.log("iOS/Safari detected - applying optimizations");
        }
        
        let isScanning = false;
        
        // Создаем элемент для статуса сканирования
        const statusElement = document.createElement('div');
        statusElement.className = 'small text-muted mt-2';
        statusElement.style.display = 'none';
        statusElement.id = 'scanner-status';
        statusElement.style.textAlign = 'center';
        filterForm.appendChild(statusElement);
        
        globalScanButton.addEventListener('click', async function() {
            if (isScanning) {
                // Остановка сканирования
                stopScanner();
                return;
            }
            
            try {
                // Начало сканирования
                console.log("Starting global barcode scanner...");
                globalScanButton.innerHTML = '⏹';
                globalScanButton.classList.add('btn-danger');
                globalScanButton.classList.remove('btn-outline-secondary');
                
                statusElement.textContent = 'Сканирование... Наведите камеру на штрихкод';
                statusElement.style.display = 'block';
                videoElement.style.display = 'block';
                isScanning = true;
                
                // Оптимизации для мобильных устройств
                if (isMobile) {
                    videoElement.style.width = '100%';
                    videoElement.style.maxWidth = '100%';
                    videoElement.style.objectFit = 'cover';
                    
                    // Добавляем подсказку для пользователя
                    if (!document.getElementById('mobile-hint')) {
                        const hint = document.createElement('div');
                        hint.id = 'mobile-hint';
                        hint.innerHTML = '<p class="text-center small mt-2">Держите устройство на расстоянии 15-30 см от штрихкода</p>';
                        videoElement.parentNode.insertBefore(hint, videoElement.nextSibling);
                    }
                }
                
                // Настройки для распознавания штрихкодов
                const hints = new Map();
                hints.set(ZXing.DecodeHintType.POSSIBLE_FORMATS, [
                    ZXing.BarcodeFormat.EAN_13,
                    ZXing.BarcodeFormat.CODE_128,
                    ZXing.BarcodeFormat.UPC_A,
                    ZXing.BarcodeFormat.QR_CODE
                ]);

                // Оптимизации для iOS
                if (isIOS || isSafari) {
                    hints.set(ZXing.DecodeHintType.TRY_HARDER, true);
                    hints.set(ZXing.DecodeHintType.PURE_BARCODE, true);
                }

                const constraints = {
                    video: {
                        facingMode: "environment",
                        width: { ideal: 1280 },
                        height: { ideal: 720 }
                    }
                };

                if (isIOS || isSafari) {
                    constraints.video.focusMode = "continuous";
                    constraints.video.advanced = [{ focusMode: "continuous" }];
                }
                
                // Запуск сканера
                await codeReader.decodeFromVideoDevice(
                    null, 
                    videoElement, 
                    (result, error) => {
                        if (result) {
                            console.log("Scanned barcode:", result.text);
                            globalSearchInput.value = result.text;
                            stopScanner();
                            
                            // Небольшая задержка перед отправкой формы
                            setTimeout(() => {
                                filterForm.submit();
                            }, 300);
                        }
                        if (error && !(error instanceof ZXing.NotFoundException)) {
                            console.error("Scan error:", error);
                            statusElement.textContent = 'Ошибка сканирования: ' + error.message;
                        }
                    },
                    hints,
                    constraints
                );
                
            } catch (error) {
                console.error("Scanner initialization error:", error);
                statusElement.textContent = 'Ошибка: ' + error.message;
                stopScanner();
            }
        });
        
        // Функция для остановки сканера
        function stopScanner() {
            if (isScanning) {
                codeReader.reset();
                videoElement.style.display = 'none';
                globalScanButton.innerHTML = '📸';
                globalScanButton.classList.remove('btn-danger');
                globalScanButton.classList.add('btn-outline-secondary');
                statusElement.style.display = 'none';
                isScanning = false;
                
                // Удаляем подсказку для мобильных
                const mobileHint = document.getElementById('mobile-hint');
                if (mobileHint) {
                    mobileHint.remove();
                }
                
                console.log("Global scanner stopped");
            }
        }
        
        // Автоматически останавливаем сканер при закрытии/обновлении страницы
        window.addEventListener('beforeunload', stopScanner);
        
        // Останавливаем сканер при отправке формы
        filterForm.addEventListener('submit', function() {
            if (isScanning) {
                stopScanner();
            }
        });
        
        // Проверка поддержки API камеры
        if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
            globalScanButton.disabled = true;
            globalScanButton.title = "Ваш браузер не поддерживает доступ к камере";
            statusElement.textContent = 'Доступ к камере не поддерживается в вашем браузере';
            statusElement.style.display = 'block';
        }
        
        // Добавляем стили для видео
        videoElement.style.borderRadius = '8px';
        videoElement.style.marginBottom = '1rem';
        videoElement.style.display = 'none';
    });
</script>
</body>
</html>